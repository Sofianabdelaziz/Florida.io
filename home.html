<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8">
    <title>Collapsible Sidebar with Icons</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script type="module" src="https://unpkg.com/@lottiefiles/dotlottie-wc@0.6.2/dist/dotlottie-wc.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@600&display=swap" rel="stylesheet">
    <style>
        body {
            margin: 0;
            font-family: Arial, sans-serif;
            background: linear-gradient(to bottom,white 5%,#C38BFA ,#8e2de2 ,#4a00e0 ,#8e2de2 );
            display: flex;
        }

        /* Ø§Ù„Ø´Ø±ÙŠØ· Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠ */
        .sidebar {
            position: fixed;
            top: 0;
            left: 0;
            width: 30%;
            height: 91vh;
            margin-top: 15%;
            bottom: 0;
            border-radius: 0 20px 20px 0;
            background-color: rgba(255, 255, 255, 0.6);
            transition: width 0.3s ease;
            overflow: hidden;
            z-index: 1000;

        }

        .sidebar.collapsed {
            width: 15%;
        }

        .sidebar .sidebar-icon {
            color: #000;
            font-size: 16px;
            padding: 2vh 3vw;
            font-size: 16px;
            padding: 10px 20px;
            /* ÙŠÙ…ÙƒÙ†Ùƒ Ø¶Ø¨Ø·Ù‡ Ø­Ø³Ø¨ Ø§Ù„Ø­Ø§Ø¬Ø© */
            display: flex;
            align-items: center;
            margin-bottom: 2vh;
            display: flex;
            align-items: center;
            margin-bottom: 1vh;
            cursor: pointer;
            transition: color 0.3s;
            /*Ù‡Ù†Ø§*/
            .sidebar .sidebar-icon i {
                color: black;
                /* âœ… Ø§Ù„Ù„ÙˆÙ† Ø§Ù„Ø¹Ø§Ø¯ÙŠ Ø£Ø³ÙˆØ¯ */
                transition: color 0.3s;
            }

            .sidebar .sidebar-icon i.active-icon {
                color: #8e2de2;
                /* âœ… Ø§Ù„Ø¨Ù†ÙØ³Ø¬ÙŠ Ø¹Ù†Ø¯ Ø§Ù„Ø¶ØºØ· */
            }

            /* ØªØ¨Ø§Ø¹Ø¯ Ø¹Ù…ÙˆØ¯ÙŠ Ø«Ø§Ø¨Øª ÙƒÙ†Ø³Ø¨Ø© Ù…Ù† Ø§Ø±ØªÙØ§Ø¹ Ø§Ù„Ø´Ø§Ø´Ø© */
        }

        .sidebar.collapsed .sidebar-icon {
            justify-content: center;
            padding: 15px 0;
        }

        .sidebar-icon i {
            margin-right: 10px;
            width: 20px;
            text-align: center;
        }

        .sidebar.collapsed .sidebar-icon span {
            display: none;
        }


        .sidebar.collapsed ~ .toggle-btn {
            left: 10%;
        }
        .sidebar.collapsed ~ .content {
            margin-left: 5%;
        }
        /* Ø§Ù„Ù…Ø­ØªÙˆÙ‰ */
        .content {
            margin-left: 0%;
            padding: 20px;
            transition: margin-left 0.3s ease;
            flex: 1;
            height: 100%;
            box-sizing: border-box;
            margin-top: 5%;

            display: flex;
            /* Ù„Ù†Ø¬Ø¹Ù„Ù‡Ø§ flex container */
            flex-direction: column;
            /* ØªØ±ØªÙŠØ¨ Ø¹Ù…ÙˆØ¯ÙŠ */
            align-items: center;
            /* ØªÙˆØ³ÙŠØ· Ø£ÙÙ‚ÙŠ */
            gap: 20px;
            /* Ù…Ø³Ø§ÙØ© Ø¨ÙŠÙ† Ø§Ù„Ø¨ÙˆÙƒØ³Ø§Øª */
        }

        /* CSS: ØªÙ†Ø³ÙŠÙ‚ Ù…ÙƒØ§Ù† Ø¹Ø±Ø¶ Lottie */
        #lottie-box {
            width: 80%;
            height: 25%;
            margin: auto;
            margin-top: 10%;
            margin-right: 5%;
            margin-left: auto;
            background-color: transparent;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        #user-info-bar {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            height: 7.5vh;
            background-color: transparent;
            z-index: 999;

            display: flex;
            align-items: center;
            justify-content: flex-end;
            /* Ø³ÙŠÙØ¨Ù‚ÙŠ Ø§Ù„Ø¹Ù†Ø§ØµØ± ÙÙŠ ØµÙ ÙˆØ§Ø­Ø¯ */
            gap: 10px;

            padding: 0 1vh;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        
        .earnings-card {
            background-color: #ffffffcc;
            border-radius: 20px;
            padding: 20px;
            width: 90%;
            max-width: 350px;
            margin: 20px auto;
            text-align: center;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            font-family: 'Arial', sans-serif;
        }

        .amount {
            font-size: 2em;
            font-weight: bold;
            color: #2ecc71;
            margin: 10px 0;
        }

        .suggestions {
            margin-top: 20px;
            text-align: left;
        }

        .suggestions ul {
            list-style: none;
            padding: 0;
        }

        .suggestions li {
            padding: 6px 0;
            font-size: 14px;
        }
        input, select {
            width: 100%;
            padding: 12px;
            margin-bottom: 5%;
            border: 2px solid #000;
            border-radius: 10px;
            font-size: 16px;
            transition: 0.3s;
        }

        .note {
            font-size: 14px;
            color: #666;
            margin-top: -4%;
        }

        /*Ø¨ÙˆÙƒØ³ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬*/

        #logoutBox {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 70%;
            height: 20%;
            padding: 20px;
            background-color: #fff;
            border-radius: 20px;
            box-shadow: 0 0 10px rgba(0,0,0,0.3);
            z-index: 1000;
            flex-direction: column;
            /* ÙˆØ§Ø¬Ø¹Ù„ Ø§Ù„Ø§ØªØ¬Ø§Ù‡ Ø¹Ù…ÙˆØ¯ÙŠ */
            align-items: center;
            /* ØªÙˆØ³ÙŠØ· Ø§Ù„Ø¹Ù†Ø§ØµØ± Ø£ÙÙ‚ÙŠÙ‹Ø§ */
            text-align: center;
            /* ØªÙˆØ³ÙŠØ· Ø§Ù„Ù†Øµ */
        }

        .logout-box-content {
            background-color: white;
            padding: 20px 30px;
            border-radius: 10px;
            text-align: center;
            box-shadow: 0 0 15px rgba(0,0,0,0.3);
        }

        /* ØªØ£ÙƒØ¯ Ø£Ù† Ø§Ù„ÙÙ‚Ø±Ø© ØªØ£Ø®Ø° Ø³Ø·Ø±Ù‹Ø§ ÙƒØ§Ù…Ù„Ù‹Ø§ */
        .logout-text {
            display: block;
            margin-bottom: 20px;
            font-size: 18px;
        }

        /* Ø­Ø§ÙˆÙŠØ© Ø§Ù„Ø£Ø²Ø±Ø§Ø±: Ø£ÙÙ‚ÙŠØ© ÙˆØ³Ø· Ø§Ù„ØµÙ†Ø¯ÙˆÙ‚ */
        .logout-buttons {
            display: flex;
            justify-content: center;
            gap: 11vw;
            /* Ù…Ø³Ø§ÙØ© Ø¨ÙŠÙ† Ø§Ù„Ø²Ø±ÙŠÙ† */
        }

        /* Ø£Ù†Ù…Ø§Ø· Ø§Ù„Ø£Ø²Ø±Ø§Ø± ÙƒÙ…Ø§ Ù„Ø¯ÙŠÙƒ */
        .logout-box-content button {
            padding: 10px 20px;
            border: none;
            background-color: #007bff;
            color: white;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        /* Ø®Ø§Øµ Ø¨Ø§Ù„Ø²Ø± Ø§Ù„Ø£Ø­Ù…Ø± */
        .logout-box-content button.logout-btn {
            background-image: linear-gradient(90deg, #8e2de2, #4a00e0);
            color: white;
        }
        .logout-box-content button.logout-btn:hover {
            background-color: #c62828;
        }

        /* Ø®Ø§Øµ Ø¨Ø²Ø± Ø§Ù„Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ø±Ù…Ø§Ø¯ÙŠ */
        .logout-box-content button.cancel-btn {
            background-color: #ccc;
            color: black;
        }
        .logout-box-content button.cancel-btn:hover {
            background-color: #aaa;
        }


        #box4 input,
#box4 select {
  display: block;
  width: 94%;
  margin: 12px auto;
  box-sizing: border-box;
}

#box4 #bankFields input {
  width: 100%;
  margin: 8px 0;
}
</style>
</head>   
<body>

    <div id="user-info-bar">
        <!-- Ø§Ù„Ø¬Ù‡Ø© Ø§Ù„ÙŠØ³Ø±Ù‰: Ø§Ø³Ù… Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ -->
        <div style="
            margin-right: auto;
            font-size: 20px;
            font-weight: bold;
            background-image: linear-gradient(90deg, #8e2de2, #4a00e0);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            font-family:'Orbitron',sans-serif;
            ">
            SwapIO
        </div>

        <!-- Ø§Ù„Ø¬Ù‡Ø© Ø§Ù„ÙŠÙ…Ù†Ù‰: Ø§Ù„Ø¥ÙŠÙ…ÙŠÙ„ ÙˆØ§Ù„Ø¯Ø§Ø¦Ø±Ø© -->

        <div style="
            border: 2px solid #8e2de2;
            padding: 1px 5px;
            border-radius: 10px;
            margin-right: 0;
            margin-left: auto;
            display: flex;
            align-items: center;
            gap: 10px;
            background-color: transparent;
            width: fit-content;
            height:5vh;
            ">

            <span id="top-email" style="font-size: 14px; font-weight: bold;">
                User@gmail.com
            </span>
            <div id="top-letter"
                style="
                width: 27px; height: 27px;
                background-image: linear-gradient(90deg, #8e2de2, #4a00e0) ;
                color: white;
                font-weight: bold;
                border-radius: 50%;
                display: flex;
                align-items: center;
                justify-content: center;
                font-size: 16px;
                ">
                U
            </div>
        </div>
    </div>

    <div class="content">
    <!-- Ø§Ø­ØªÙØ¸Øª Ø¨Ù…Ø§Ø±Ùƒ Ø£Ø¨ Ø§Ù„Ø¹Ù†ØµØ± ÙƒÙ…Ø§ Ø·Ù„Ø¨Øª -->
<div id="lottie-box">
  <dotlottie-wc
    id="lottie-player"
    src="https://lottie.host/78fb49f1-284f-4156-8ecf-8a963d061499/Jzuv2YYSo8.lottie"
    style="width: 100%; height: 100%;"
    speed="1"
    autoplay
    loop>
  </dotlottie-wc>
</div>

<script>
(function(){
  const animations = [
    "https://lottie.host/78fb49f1-284f-4156-8ecf-8a963d061499/Jzuv2YYSo8.lottie",
    "https://lottie.host/bdf8f8b5-3525-4f66-a0cc-d70917c05aac/OToYfbsi3l.lottie",
      "https://lottie.host/a40be5ab-fcfb-47de-b047-fcfaf5c7c99f/MYgsH215FR.lottie",
      "https://lottie.host/7f12cfac-4ae6-4184-bb75-035636b74fc7/ZWYFBRG3hn.lottie",
      "https://lottie.host/76070702-f629-4d6e-87af-aee556c422dc/4TNLfWUVHW.lottie",
      "https://lottie.host/4735d95e-9cc1-464b-9616-1f74c94f0237/Lr2ZHuRza2.lottie",
      "https://lottie.host/0af5a78b-3ad0-4eb1-b7fa-688c2c9abc09/7ao1KCiqzX.lottie",
      "https://lottie.host/e6b22447-cfa0-458b-8aec-c4ce931884f1/9dpYY94i8f.lottie",
      "https://lottie.host/8e6fbbd3-930f-4fb4-98dc-0e501deca094/oRV0X8DYJ1.lottie",
      "https://lottie.host/836d1751-ad28-48f3-a8f0-b1c51b7f9f1e/JzQ79Gt5hG.lottie",
      "https://lottie.host/a705d192-8d36-4b7d-85e8-8c751b4d77df/LzpVIciqg1.lottie",
  ];

  const player = document.getElementById("lottie-player");
  if (!player) return;

  let idx = 0;
  let busy = false;
  let fallbackTimer = null;

  // Ù…Ø³Ø­ loop Ù…Ø¤Ù‚ØªØ§Ù‹ Ø­ØªÙ‰ ÙŠØ³Ù…Ø­ Ù„Ù„ÙˆØªÙŠ Ø£Ù† "ÙŠÙ†ØªÙ‡ÙŠ"
  function disableLoopOnce() {
    if (player.hasAttribute("loop")) {
      player._hadLoop = true;        // Ù†Ø®Ø²Ù† Ø£Ù†Ù‡ ÙƒØ§Ù† Ù…ÙˆØ¬ÙˆØ¯Ø§Ù‹ Ø£ØµÙ„Ø§Ù‹
      player.removeAttribute("loop");
    } else {
      player._hadLoop = false;
    }
  }
  // Ù„Ùˆ Ø£Ø±Ø¯Ù†Ø§ Ø¥Ø¹Ø§Ø¯Ø© loop Ø¨Ø¹Ø¯ ÙƒÙ„ Ø´ÙŠØ¡ (Ù†ØªØ±ÙƒÙ‡ Ù…ÙØ¹Ø·Ù‘ÙÙ„Ø§Ù‹ Ù„Ø£Ù†Ù‡ ÙŠÙ…Ù†Ø¹ Ø§Ù„Ø§Ù†ØªÙ‡Ø§Ø¡)
  function restoreLoopIfWanted() {
    // Ù„Ù† Ù†Ø¹ÙŠØ¯ loop ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ù„Ø£Ù† Ø°Ù„Ùƒ ÙŠÙ…Ù†Ø¹ Ø§ÙƒØªØ´Ø§Ù Ù†Ù‡Ø§ÙŠØ© Ø§Ù„Ù„ÙˆØªÙŠ.
    // Ù„Ùˆ Ø±ØºØ¨Øª Ø£Ù† ÙŠÙØ¹Ø§Ø¯ ÙØ¹Ù„Ø§Ù‹ Ø¨Ø¹Ø¯ ÙƒÙ„ ØªØ¨Ø¯ÙŠÙ„ Ø£Ø²Ù„ Ø§Ù„ØªØ¹Ù„ÙŠÙ‚ Ù…Ù† Ø§Ù„Ø³Ø·Ø± Ø§Ù„ØªØ§Ù„ÙŠ:
    // if (player._hadLoop) player.setAttribute("loop", "");
  }

  // Ù…Ø­Ø§ÙˆÙ„Ø© ØªØ´ØºÙŠÙ„ Ø§Ù„Ø¹Ù†ØµØ± Ø¥Ø°Ø§ ÙƒØ§Ù† ÙŠØ¯Ø¹Ù… play()
  function tryPlay() {
    if (typeof player.play === "function") {
      try { player.play(); } catch(e) { /* Ù„Ø§ Ù†ÙƒØ³Ø± Ø§Ù„ØªÙ†ÙÙŠØ° */ }
    }
  }

  // ØªÙ†Ø¸ÙŠÙ Ù…Ø³ØªÙ…Ø¹ÙŠÙ† ÙˆÙØ§Ù„Ø¨Ø§Ùƒ
  function cleanUpListeners(onComplete) {
    player.removeEventListener("complete", onComplete);
    player.removeEventListener("finished", onComplete);
    player.removeEventListener("lottie-finished", onComplete);
    player.removeEventListener("timeupdate", onTimeUpdate);
    if (fallbackTimer) { clearTimeout(fallbackTimer); fallbackTimer = null; }
  }

  // ØªØ³ØªÙ‚Ø¨Ù„ Ø­Ø¯Ø« timeupdate Ù„ØªØªØ¨Ø¹ Ø§Ù„ØªÙ‚Ø¯Ù‘Ù… (Ø¨Ø¹Ø¶ Ø§Ù„Ø¥ØµØ¯Ø§Ø±Ø§Øª ØªØ¹Ø·ÙŠ detail.progress)
  function onTimeUpdate(e) {
    try {
      const prog = (e && e.detail && (typeof e.detail.progress !== "undefined")) ? e.detail.progress : null;
      if (prog !== null && prog >= 0.999) {
        // Ù†Ø¹ØªØ¨Ø±Ù‡ Ø§Ù†ØªÙ‡Ù‰
        triggerNextAnimation();
      }
    } catch (err){}
  }

  // Ù…Ø§ Ù†Ø±ÙŠØ¯ Ø£Ù† ÙŠØ­Ø¯Ø« Ø¹Ù†Ø¯ Ø§ÙƒØªØ´Ø§Ù Ø§Ù†ØªÙ‡Ø§Ø¡ Ù‡Ø°Ø§ Ø§Ù„Ù„ÙˆØªÙŠ
  function onCompleteOnce() {
    triggerNextAnimation();
  }

  // Ø¥Ø°Ø§ Ù„Ù… Ù†Ø±Ù‰ Ø£ÙŠ Ø­Ø¯Ø« ØµØ§Ù„Ø­ Ø¨Ø¹Ø¯ ÙˆÙ‚Øª Ù…Ø¹Ù‚ÙˆÙ„ØŒ Ù†Ø³ØªØ®Ø¯Ù… ÙØ§Ù„ÙŠØ¨Ø§Ùƒ
  function setFallback(timeoutMs = 15000) {
    if (fallbackTimer) clearTimeout(fallbackTimer);
    fallbackTimer = setTimeout(() => {
      // Ù…Ø­Ø§ÙˆÙ„Ø© Ø§Ù„Ø§Ø¹ØªÙ…Ø§Ø¯ Ø¹Ù„Ù‰ ØªÙˆÙ‚ÙŠØª Ø§ÙØªØ±Ø§Ø¶ÙŠ: Ù†Ø¹ØªØ¨Ø±Ù‡ Ø§Ù†ØªÙ‡Ù‰
      triggerNextAnimation();
    }, timeoutMs);
  }

  // Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ù„Ù„Ø£Ù†ÙŠÙ…ÙŠ Ø§Ù„ØªØ§Ù„ÙŠ ÙØ¹Ù„ÙŠØ§Ù‹ (ÙŠØ³ØªØ¯Ø¹Ù‰ Ù…Ø±Ù‘Ø© ÙˆØ§Ø­Ø¯Ø© Ù„ÙƒÙ„ Ø§Ù†ØªÙ‡Ø§Ø¡)
  function triggerNextAnimation() {
    if (busy) return;
    busy = true;

    // ØªÙ†Ø¸ÙŠÙ ÙƒÙ„ Ø§Ù„Ù…Ø³ØªÙ…Ø¹ÙŠÙ† Ø§Ù„Ø­Ø§Ù„ÙŠÙŠÙ†
    cleanUpListeners(onCompleteOnce);

    // Ù‚Ø·Ø¹ Ø§Ù„ÙØ§Ù„Ø¨Ø§Ùƒ Ù„Ùˆ ÙƒØ§Ù† Ù…ÙˆØ¬ÙˆØ¯Ø§Ù‹
    if (fallbackTimer) { clearTimeout(fallbackTimer); fallbackTimer = null; }

    // Ø¥Ø¹Ø¯Ø§Ø¯ Ù„Ù„Ø£Ù†ÙŠÙ…ÙŠ Ø§Ù„Ù‚Ø§Ø¯Ù…
    idx = (idx + 1) % animations.length;

    // Ø¶Ø¹ Ø§Ù„Ù…ØµØ¯Ø± Ø§Ù„Ø¬Ø¯ÙŠØ¯ Ø«Ù… Ø´ØºÙ‘Ù„Ù‡
    player.setAttribute("src", animations[idx]);

    // Ø£Ø¹Ø¯ Ø§Ù„Ù„Ø¹Ø¨ (Ø¨Ø¹Ø¶ Ø§Ù„Ø¥ØµØ¯Ø§Ø±Ø§Øª Ù„Ø§ ØªØ¨Ø¯Ø£ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ø¹Ù†Ø¯ ØªØºÙŠÙŠØ± src)
    // Ù†Ø¹Ø·ÙŠÙ‡ Ù„Ø­Ø¸Ø§Øª Ù„ÙŠØ­Ù…Ù‘Ù„ Ø«Ù… Ù†Ø­Ø§ÙˆÙ„ Ø§Ù„ØªØ´ØºÙŠÙ„
    setTimeout(() => {
      tryPlay();
      // Ø¨Ø¹Ø¯ Ø§Ù„Ø¨Ø¯Ø¡ Ù†Ø¹ÙŠØ¯ ØªÙØ¹ÙŠÙ„ Ø§Ù„Ù…Ø±Ø§Ù‚Ø¨Ø© Ø¹Ù„Ù‰ Ù‡Ø°Ø§ Ø§Ù„Ù„ÙˆØªÙŠ Ø§Ù„Ø¬Ø¯ÙŠØ¯
      attachListeners();
      busy = false;
    }, 120);
  }

  // Ø±Ø¨Ø· Ø§Ù„Ù…Ø³ØªÙ…Ø¹ÙŠÙ† Ù„Ù„Ø§Ù†ØªÙ‡Ø§Ø¡ ÙˆØ§Ù„Ù…ØªØ§Ø¨Ø¹Ø©
  function attachListeners() {
    // Ø­Ø¯Ø«Ø§Øª Ù…Ø­ØªÙ…Ù„Ø© Ù‚Ø¯ ØªØµØ¯Ø± Ø¹Ù†Ø¯ Ø§Ù„Ø§Ù†ØªÙ‡Ø§Ø¡ â€” Ù†Ø±Ø¨Ø·Ù‡Ø§ ÙƒÙ„Ù‡Ø§ ÙƒØ§Ø­ØªÙŠØ§Ø·
    player.addEventListener("complete", onCompleteOnce, { once:true });
    player.addEventListener("finished", onCompleteOnce, { once:true });
    player.addEventListener("lottie-finished", onCompleteOnce, { once:true });
    // Ù…Ø±Ø§Ù‚Ø¨Ø© Ø§Ù„ØªÙ‚Ø¯Ù‘Ù… (Ø¥Ù† ÙˆÙÙ‘Ø±Ù‡ Ø§Ù„Ø¹Ù†ØµØ±)
    player.addEventListener("timeupdate", onTimeUpdate);

    // ÙØ§Ù„ÙŠØ¨Ø§Ùƒ: Ù„Ùˆ Ù„Ù… Ù†Ù„Ù‚Ù Ø£ÙŠ Ø­Ø¯Ø« Ø®Ù„Ø§Ù„ X Ø«Ø§Ù†ÙŠØ©ØŒ Ù†Ù†ØªÙ‚Ù„ ÙŠØ¯ÙˆÙŠØ§Ù‹
    setFallback(12000);
  }

  // Ø¨Ø¯Ø¡ Ø§Ù„ØªØ´ØºÙŠÙ„: Ø³Ù†Ù‚ÙˆÙ… Ù…Ø¤Ù‚ØªØ§Ù‹ Ø¨Ø¥Ø²Ø§Ù„Ø© loop Ø­ØªÙ‰ ÙŠØ³Ù…Ø­ ÙƒÙ„ Ù„ÙˆØªÙŠ Ø¨Ø§Ù„Ø§Ù†ØªÙ‡Ø§Ø¡
  disableLoopOnce();

  // Ù†Ø¹ÙŠÙ‘Ù† Ø§Ù„Ù…ØµØ¯Ø± Ø§Ù„Ø£ÙˆÙ„ (Ù„Ùˆ Ù„Ù… ÙŠÙƒÙ† Ù…ÙˆØ¬ÙˆØ¯ Ø£Ùˆ Ù†Ø±ÙŠØ¯ Ø§Ù„ØªØ£ÙƒÙ‘Ø¯)
  player.setAttribute("src", animations[idx]);
  // Ù…Ø­Ø§ÙˆÙ„Ø© Ø§Ù„ØªØ´ØºÙŠÙ„
  tryPlay();

  // Ø¨Ø¹Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¹Ù†ØµØ± (ÙÙŠ Ø­Ø§Ù„ Ø£ØµØ¯Ø± load Ø£Ùˆ loaded)
  player.addEventListener("load", () => {
    attachListeners();
  }, { once:true });
  player.addEventListener("loaded", () => {
    attachListeners();
  }, { once:true });

  // ÙƒØ­Ø§Ù„Ø© Ø¹Ø§Ù…Ø© Ù†Ø±Ø¨Ø· Ø£ÙŠØ¶Ù‹Ø§ Ù…Ø¨Ø§Ø´Ø±Ø© (Ù„Ùˆ Ø§Ù„Ø¹Ù†ØµØ± Ø¬Ø§Ù‡Ø² Ø¨Ø§Ù„ÙØ¹Ù„)
  attachListeners();

  // Ø¥Ø¹Ø§Ø¯Ø© loop Ø¥Ø°Ø§ Ø£Ø±Ø¯Øª Ù„Ø§Ø­Ù‚Ø§Ù‹ (Ù…Ø¹Ù„Ù‘Ù‚ Ø§ÙØªØ±Ø§Ø¶ÙŠØ§Ù‹)
  // restoreLoopIfWanted();

})();
      </script>   

        <div id="box1" class="box" style="width: 70%; margin: 5px auto; padding: 25px; background-color: rgba(255, 255, 255, 0.79);margin-left:15%; border-radius: 20px; box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1); font-family: 'Segoe UI', sans-serif;margin-bottom:80%;">
            <h2 style="font-size: 26px; background-image: linear-gradient(90deg, #8e2de2, #4a00e0);
                -webkit-background-clip: text;
                -webkit-text-fill-color: transparent; margin-bottom: 5%;text-align:center;"> Ø¬Ø§Ù‡Ø² Ù„ØªØ­Ù‚ÙŠÙ‚ Ø£Ù‚ØµÙ‰ Ø§Ø³ØªÙØ§Ø¯Ø© Ù…Ù† ÙˆÙ‚ØªÙƒ <i class="fas fa-chart-line"></i>  ØŸ </h2>
            <p style="font-size: 16px; color: #555; margin-bottom: 10%;text-align:center;font-weight: bold;">
                Ø§Ø¨Ø¯Ø£ ÙÙŠ Ù…Ø´Ø§Ù‡Ø¯Ø© Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª Ø§Ù„Ù…ØµÙ…Ù…Ø© Ø®ØµÙŠØµÙ‹Ø§ Ù„Ùƒ ÙˆØ§Ø¨Ø¯Ø£ Ø±Ø­Ù„ØªÙƒ Ù†Ø­Ùˆ Ø¯Ø®Ù„ Ø¥Ø¶Ø§ÙÙŠ Ø¨ÙƒÙ„ Ø³Ù‡ÙˆÙ„Ø©
            </p>

            <div style="text-align: center;">
  <a href="redirect.html" 
     style="display: inline-block; width: 70%; text-align: center; padding: 12px 28px; background: linear-gradient(90deg, #8e2de2, #4a00e0); color: white; font-size: 16px; font-weight: bold; border-radius: 50px; text-decoration: none; transition: opacity 0.3s ease;">
    Ø´Ø§Ù‡Ø¯ Ø§Ù„Ø¢Ù†
    <i class="fas fa-play-circle"></i> <!-- Ø¯Ø§Ø¦Ø±Ø© Ø¨Ù‡Ø§ Ø²Ø± ØªØ´ØºÙŠÙ„ -->
  </a>
            </div>
            <p style="font-size:14px;color:#d8b4fe;text-align:left;">
                <a href="advice.html">Ø­ÙˆÙ„ Ø§Ù„Ø¥Ø³ØªØ®Ø¯Ø§Ù…</a>
            </p>
        </div>

        <div id="box2" class="box" style="
            background-color: rgba(255, 255, 255, 0.79);
            padding: 20px;
            margin-bottom:80%;
            margin-left:15%;
            border-radius: 20px;
            display: none;
            color: white;
            width: 70%;
            box-shadow: 0 8px 20px rgba(0,0,0,0.1);
            ">
            <h2 style="margin-bottom: 10%;text-align:right;color:#000;">Ø§Ù„Ø±ØµÙŠØ¯ Ø§Ù„Ø­Ø§Ù„ÙŠ     <i class="fas fa-money-check"></i> </h2>

            <div style="background-image: linear-gradient(90deg, #8e2de2, #4a00e0); padding: 10px 20px ;margin-bottom:10%; border-radius: 15px; width: 85%;">
                <!-- Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ù‡Ù†Ø§ -->
                <!-- Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø¹Ù†ØµØ± Ù‡Ù†Ø§ -->
                <div style="font-size: 28px;font-family:'Orbitron',sans-serif; font-weight: bold ;text-align:center;">
                    <span class="balance">0.00</span> USD
                </div>
            </div>

            <p class="text-gray-700 text-sm" style="text-align:right;color:#000;">
                Ø£Ø±Ø¨Ø§Ø­ Ø§Ù„ÙŠÙˆÙ… <i class="fas fa-coins"></i>
            </p>
            <div style="font-size: 16px;background-image: linear-gradient(90deg, #8e2de2, #4a00e0);
                -webkit-background-clip: text;
                -webkit-text-fill-color: transparent; font-weight: bold ;font-family:'Orbitron',sans-serif;text-align:right;margin-bottom:5%;">
                <span id="daybalance">0.00</span> USD
            </div>
            <p class="text-gray-700 text-sm" style="text-align:right;color:#000;">
                ØªÙ…Øª Ù…Ø´Ø§Ù‡Ø¯Ø©<i class="fas fa-coins"></i>
            </p>
            <div style="font-size: 16px;background-image: linear-gradient(90deg, #8e2de2, #4a00e0);
                -webkit-background-clip: text;
                -webkit-text-fill-color: transparent; font-weight: bold ;font-family:'Orbitron',sans-serif;text-align:right;margin-bottom:5%;">
                <span id="Adswatch">00</span>

            </div>





            <div style="text-align:right;margin-bottom:11%;">
                <p style=" display: inline;color:#d8b4fe;text-align:right ;">
                    <a href="advice.html">ÙƒÙŠÙ ØªØ²ÙŠØ¯ Ø£Ø±Ø¨Ø§Ø­ÙƒØŸ<a/>
                    </p>
                </div>

               <div style="text-align: center;margin-bottom:7%;">
  <a href="redirect.html" 
     style="display: inline-block; width: 70%; text-align: center; padding: 12px 28px; background: linear-gradient(90deg, #8e2de2, #4a00e0); color: white; font-size: 16px; font-weight: bold; border-radius: 50px; text-decoration: none; transition: opacity 0.3s ease;">
    Ø´Ø§Ù‡Ø¯ Ø£ÙƒØ«Ø±
    <i class="fas fa-play-circle"></i>
  </a>
               </div> 
            </div>



            <div id="box3" class="box" style="width: 80%;
                height: 50%;display: none; padding: 20px; border: 1px solid #ccc; border-radius: 10px; text-align: center;margin-bottom:35%;margin-left:15%;background-color:transparent;">
                <img src="https://i.imgur.com/oRPmys5.png" style="width: 100%; height: 100%;">
            </div>

            <!-- âœ… Ø¨ÙˆÙƒØ³ Ø®Ø§Øµ Ù„ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ø³Ø­Ø¨ Ø¨Ø§Ù„ÙƒØ§Ù…Ù„ -->


            <div id="box4" class="box" style="width: 70% ; padding: 20px;display: none; border: 1px solid #ccc; border-radius: 20px; text-align: right;margin-bottom:60%;background-color: rgba(255, 255, 255, 0.79);margin-left:15%;">
                <!-- Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø¨ÙˆÙƒØ³ Ù‡Ù†Ø§ -->
                <!-- âœ… Ø§Ù„Ø±ØµÙŠØ¯ -->
                <div class="mb-5 text-center">
                    <p class="text-gray-700 text-sm">
                        Ø±ØµÙŠØ¯Ùƒ Ù‡Ùˆ <i class="fas fa-money-check"></i>
                    </p>
                    <div style="font-size: 16px; font-family:'Orbitron',sans-serif;font-weight: bold ;text-align:right;margin-bottom:7%;">
                        <span class="balance">0.00</span> USD
                    </div>
                </div>

                <!-- âœ… Ø¥Ø¯Ø®Ø§Ù„ Ù…Ø¨Ù„Øº Ø§Ù„Ø³Ø­Ø¨ -->
                <div class="input-container">
                    <input type="number" placeholder="Ø£Ø¯Ø®Ù„ Ù…Ø¨Ù„Øº Ø§Ù„Ø³Ø­Ø¨" />
                <p class="note">
                    Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ø¯Ù†Ù‰ Ù„Ù„Ø³Ø­Ø¨ Ù‡Ùˆ 5 USD
                </p>
            </div>

            
            <!-- Ù†Ø§ÙØ°Ø© Ø§Ø®ØªÙŠØ§Ø± Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø³Ø­Ø¨ -->

            <select id="paymentSelect">
                <option disabled selected>Ø§Ø®ØªØ± ÙˆØ³ÙŠÙ„Ø© Ø§Ù„Ø¯ÙØ¹</option>
            </select>

            <!-- âœ… Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø­Ø³Ø§Ø¨ -->
            <div class="mb-5">
                <input type="email" name="email" autocomplete="email" id="accountInput" placeholder="Ø£Ø¯Ø®Ù„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø­Ø³Ø§Ø¨"
                class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400" />
            <!--Ø­Ù‚ÙˆÙ„ Ø§Ù„Ø­Ø³Ø§Ø¨ Ø§Ù„Ø¨Ù†ÙƒÙŠ-->
            <div id="bankFields" style="display: none; margin-top: 10px;">
                <input id="bankNameHolder" type="text" placeholder="Ø§Ø³Ù… ØµØ§Ø­Ø¨ Ø§Ù„Ø­Ø³Ø§Ø¨ Ø§Ù„Ø¨Ù†ÙƒÙŠ" style="width:100%; margin-bottom:10px;">
                <input id="bankIBAN" type="text" placeholder="Ø±Ù‚Ù… Ø§Ù„Ø­Ø³Ø§Ø¨ Ø§Ù„Ø¨Ù†ÙƒÙŠ Ø§Ù„Ø¯ÙˆÙ„ÙŠ (IBAN)" style="width:100%; margin-bottom:10px;">
                <input id="bankName" type="text" placeholder="Ø§Ø³Ù… Ø§Ù„Ø¨Ù†Ùƒ" style="width:100%; margin-bottom:10px;">
                <input id="bankSwift" type="text" placeholder="Ø±Ù…Ø² SWIFT Ù„Ù„Ø¨Ù†Ùƒ" style="width:100%;">
            </div>

        </div>

        <!-- âœ… Ø²Ø± Ø§Ù„Ø³Ø­Ø¨ Ø§Ù„Ø¢Ù† -->
        <div style="text-align: center;margin-bottom:7%;">
            <a href="#start" onclick="withdrawMoney(event)" style="display: inline-block; width: 30%; text-align: center; padding: 12px 28px; background: linear-gradient(90deg, #8e2de2, #4a00e0);; color: white; font-size: 16px; font-weight: bold; border-radius: 15px; text-decoration: none; transition: opacity 0.3s ease;margin-top:7%;">
                <i class="fas fa-university"></i> Ø¥Ø³Ø­Ø¨
            </a>
        </div>

        <p id="lastWithdrawStatus" onclick="window.location.href='withdraw.html'" style="font-size:16px;">
            <a href="#" style="text-decoration: underline; color: inherit;">Ø¢Ø®Ø± Ø¹Ù…Ù„ÙŠØ© Ø³Ø­Ø¨</a>
        </p>
    </div>

    <div id="box5" class="box" style="width: 70%; height: 45%;display: none; padding: 20px; border: 1px solid #ccc; border-radius: 20px; text-align: center; margin-bottom:60%;margin-left:15%; background-color: rgba(255, 255, 255, 0.79); box-shadow: 0 4px 8px rgba(0,0,0,0.1);">


        <div style="display: flex; justify-content: center; align-items: center;">
            <h2 style="font-size: 14px;color:#000; margin: 0; display: flex;margin-bottom:3%; align-items: center;"> Ø´Ø§Ø±Ùƒ Ø±Ø§Ø¨Ø· Ø¥Ø­Ø§Ù„ØªÙƒ Ù…Ø¹ Ø§Ù„Ø£ØµØ¯Ù‚Ø§Ø¡ ÙˆØ§ÙƒØ³Ø¨ Ø¯ÙˆÙ…Ø§ Ù†Ø³Ø¨Ø© 20% Ù…Ù† Ø§Ø±Ø¨Ø§Ø­Ù‡Ù… Ø§Ù„ÙŠÙˆÙ…ÙŠØ©  <i class="fas fa-share-nodes" style="margin-left: 5%;"></i>
            </h2>
        </div>
<div style="
  display: flex;
  width: 100%;
  height: 60px;
  background-image: linear-gradient(90deg, #8e2de2, #4a00e0);
  border-radius: 20px;
  align-items: center;
  gap: 10px;
  margin-bottom: 20px;
  box-sizing: border-box;
  padding: 0 10px;
">
  <div class="sidebar-icon" style="display: flex;">
    <i onclick="copyReferralText()" class="fas fa-copy"></i>
  </div>
<p id="referralText" style="
  color: white;
  margin: 0;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  flex: 1;
  min-width: 0;
"></p>
</div>
        <p style="color: #000; font-size: 14px;margin-bottom:9%;">
            <i class="fas fa-gift"></i>Ø´Ø§Ø±Ùƒ Ø±Ø§Ø¨Ø·Ùƒ Ø§Ù„Ø¢Ù†
        </p>
        
        <a href="#start" onclick="shareNow()" style="display: inline-block; width: 40%; text-align: center;margin-bottom:8%; padding: 12px 28px; background: linear-gradient(90deg, #8e2de2, #4a00e0); color: white; font-size: 16px; font-weight: bold; border-radius: 50px; text-decoration: none; transition: opacity 0.3s ease;">
            Ù…Ø´Ø§Ø±ÙƒØ©
            <i class="fas fa-share-nodes"></i></a>

        <p id="refText" style="color:#000;font-weight:600;font-size:12px;"></p>

    </div>

<!--Ø¨ÙˆÙƒØ³ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬ -->
<div id="logoutBox" class="logout-box-content">

    <p class="logout-text" style="font-size:20px;background-image: linear-gradient(90deg, #8e2de2, #4a00e0);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;margin-bottom:17%;">
        Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬ <i class="fas fa-sign-out-alt logout-icon"></i>ØŸ
    </p>
    <div class="logout-buttons">
        <button class="logout-btn" onclick="logout()">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬</button>
        <button class="cancel-btn" onclick="hideLogoutBox()">Ø¥Ù„ØºØ§Ø¡</button>
    </div>


</div>


</div>


<!-- Ø§Ù„Ø´Ø±ÙŠØ· Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠ -->
<div class="sidebar collapsed" id="sidebar">
    <div class="sidebar-icon" id="toggleBtn">
        <i class="fas fa-angle-right"></i><span>Ø±Ø¬ÙˆØ¹</span>
    </div>
    <div class="sidebar-icon" onclick="showBox('box1', this)">

        <i class="fas fa-home" style="color:#8e2de2;"></i> <span> Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© </span>

    </div>
    <div class="sidebar-icon" onclick="showBox('box2', this)">
        <i class="fas fa-wallet"></i> <span> Ø±ØµÙŠØ¯ÙŠ </span>
    </div>
    <div class="sidebar-icon" onclick="showBox('box3', this)">
        <i class="fas fa-bell"></i><span>Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª</span>
    </div>
    <div class="sidebar-icon" onclick="showBox('box4', this)">
        <i class="fas fa-credit-card"></i>
        <span>Ø³Ø­Ø¨</span>
    </div>
    <div class="sidebar-icon" onclick="showBox('box5', this)">
        <i class="fas fa-users"></i>
        <span>Ù…Ø´Ø§Ø±ÙƒØ©</span>
    </div>
    <div class="sidebar-icon">
        <i class="fas fa-download"></i>
        <span> Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ </span>
    </div>
    <a href="mailto:swapio.sepport@gmail.com?subject=Ø§ÙƒØªØ¨ Ø§Ø³ØªÙØ³Ø§Ø±Ùƒ Ø§Ùˆ Ø·Ù„Ø¨Ùƒ Ø§Ùˆ Ø§Ù‚ØªØ±Ø§Ø­Ùƒ Ù‡Ù†Ø§ - Ø³ÙŠØªÙ… Ø§Ù„Ø±Ø¯ ÙÙŠ Ø£Ø³Ø±Ø¹ ÙˆÙ‚Øª">
    <div class="sidebar-icon">
        <i class="fas fa-headset"></i>
        <span>Ø§Ù„Ø¯Ø¹Ù… Ø§Ù„ÙÙ†ÙŠ</span>
    </div>
    </a>
    <div class="sidebar-icon" onclick="showLogoutBox()">
        <i class="fas fa-sign-out-alt"></i><span>ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬</span>
    </div>
</div>


<!-- JavaScript -->

                        


                        <script>
if (localStorage.getItem("isLoggedIn") !== "true") {
    window.location.href = "index.html"; // ÙŠÙØªØ­ ØµÙØ­Ø© ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„
}
                        </script>

<!-- Firebase SDK -->
<script src="https://www.gstatic.com/firebasejs/12.0.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/12.0.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/12.0.0/firebase-database-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/12.0.0/firebase-firestore-compat.js"></script>
<script>
    // Ø¥Ø¹Ø¯Ø§Ø¯ Firebase
    const firebaseConfig = {
        apiKey: "AIzaSyBhOhK3yCv4p-dhfXYx-w1aRB19a-VpRKY",
        authDomain: "swapio-30675.firebaseapp.com",
        projectId: "swapio-30675",
        storageBucket: "swapio-30675.appspot.com",
        messagingSenderId: "936588847751",
        appId: "1:936588847751:web:81aa27a8a12fc6d6a06622",
        measurementId: "G-L4RH076S6H",
        databaseURL: "https://swapio-30675-default-rtdb.firebaseio.com",// â† Ø£Ø¶Ù Ù‡Ø°Ø§ Ø§Ù„Ø³Ø·Ø±!

    };

    // ØªÙØ¹ÙŠÙ„ Firebase
    firebase.initializeApp(firebaseConfig);

    // Ø§Ù„ØªØ£ÙƒØ¯ Ù…Ù† Ø£Ù† Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù…Ø³Ø¬Ù„ Ø§Ù„Ø¯Ø®ÙˆÙ„
    firebase.auth().onAuthStateChanged(function(user) {
        if (user) {
            const userEmail = user.email;
            const firstLetter = userEmail.charAt(0).toUpperCase();
            console.log("Email:", userEmail);
            console.log("First letter:", firstLetter);
        } 
        
        
    });

</script>
<script>
                    //Ø¬Ù„Ø¨ Ø§Ù„Ø¥ÙŠÙ…ÙŠÙ„ ÙˆØ¹Ø±Ø¶Ù‡ ÙÙŠ Ø§Ù„Ø£Ø¹Ù„Ù‰ 
firebase.auth().onAuthStateChanged(user => {
    if (!user) return;
    const uid = user.uid;

    firebase.database()
    .ref(`users/${uid}/email`)
    .once('value')
    .then(snapshot => {
        const email = snapshot.val() ?? "";
        
        // Ø¹Ø±Ø¶ Ø§Ù„Ø¥ÙŠÙ…ÙŠÙ„ ÙÙŠ Ø§Ù„Ø¹Ù†ØµØ± Ø§Ù„Ù„ÙŠ id="top-email"
        const topEmail = document.getElementById("top-email");
        if (topEmail) topEmail.textContent = email;

        // Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ø£ÙˆÙ„ Ø­Ø±Ù Ù…Ù† Ø§Ù„Ø¥ÙŠÙ…ÙŠÙ„
        const firstLetter = email ? email.charAt(0).toUpperCase() : "";

        // Ø¹Ø±Ø¶Ù‡ ÙÙŠ Ø§Ù„Ø¹Ù†ØµØ± Ø§Ù„Ù„ÙŠ id="top-letter"
        const topLetter = document.getElementById("top-letter");
        if (topLetter) topLetter.textContent = firstLetter;

        // Ø­ÙØ¸ Ø§Ù„Ø¥ÙŠÙ…ÙŠÙ„ ÙÙŠ localStorage
        if (email) {
            localStorage.setItem("withdrawEmail", email);
        }
    })
    .catch(err => {
        console.error("Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ø§Ù„Ø¥ÙŠÙ…ÙŠÙ„:", err);
        const topEmail = document.getElementById("top-email");
        if (topEmail) topEmail.textContent = "";
        
        const topLetter = document.getElementById("top-letter");
        if (topLetter) topLetter.textContent = "";
    });
});
</script>
<script>
   //ÙƒÙˆØ¯ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬
            function showLogoutBox() {
                document.getElementById("logoutBox").style.display = "flex";
            }

            function hideLogoutBox() {
                document.getElementById("logoutBox").style.display = "none";
            }
            function logout() {
                // ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬ Ù…Ù† Firebase
                firebase.auth().signOut().then(() => {
                    // Ø¨Ø¹Ø¯ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬ Ø¨Ù†Ø¬Ø§Ø­
                
localStorage.setItem("isLoggedIn", "false");  
                    window.location.href = "index.html"; // ØªÙˆØ¬ÙŠÙ‡ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù„ØµÙØ­Ø© Ø§Ù„Ø¯Ø®ÙˆÙ„
                }).catch((error) => {
                    console.error("ÙØ´Ù„ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬ Ù…Ù† Firebase:", error);
                });
            }

</script>

<script>
    // Ø§Ù„Ø¹Ù†ØµØ±
const refText = document.getElementById("refText");

if (refText) { // âœ… ÙØ­Øµ ÙˆØ¬ÙˆØ¯ Ø§Ù„Ø¹Ù†ØµØ±
    refText.textContent = "ØªÙ…Øª Ø¥Ø­Ø§Ù„Ø© 0 Ù…Ø³ØªØ®Ø¯Ù…";

    firebase.auth().onAuthStateChanged(user => {
        if (!user) return; 
        const uid = user.uid;
        firebase.database().ref(`referrals/${uid}/referredUsers`)
        .once("value")
        .then(snap => {
            const name = snap.val();
            if (name) refText.textContent = `ØªÙ…Øª Ø¥Ø­Ø§Ù„Ø© ${name} Ù…Ø³ØªØ®Ø¯Ù…`;
        })
        .catch(() => {
            /* Ù†ØªØ±Ùƒ Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠ */
        });
    });
    }
    </script>

<script>
    //ØªØ­Ø¯ÙŠØ« Ø§Ù„ØµÙØ­Ø© Ø¹Ù†Ø¯ Ø§Ù„Ø±Ø¬ÙˆØ¹
    window.addEventListener("pageshow", function (event) {
        if (event.persisted || performance.getEntriesByType("navigation")[0].type === "back_forward") {
            location.reload();
        }
    });
</script>

<script>
    // Ø²Ø± Ø§Ø¶Ù‡Ø§Ø± ÙˆØ§Ø®ÙØ§Ø¡ Ø§Ù„Ø´Ø±ÙŠØ· Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠ
    const sidebar = document.getElementById('sidebar');
const toggleBtn = document.getElementById('toggleBtn');

if (sidebar && toggleBtn) { // âœ… ÙØ­Øµ ÙˆØ¬ÙˆØ¯ Ø§Ù„Ø¹Ù†ØµØ±ÙŠÙ†
    const icon = toggleBtn.querySelector('i');

    toggleBtn.addEventListener('click', () => {
        sidebar.classList.toggle('collapsed');

        if (sidebar.classList.contains('collapsed')) {
            icon.classList.remove('fa-angle-left');
            icon.classList.add('fa-angle-right');
        } else {
            icon.classList.remove('fa-angle-right');
            icon.classList.add('fa-angle-left');
        }
    });
    }
</script>

<script>
    function showBox(idToShow, iconElement) {
        // Ø¥Ø®ÙØ§Ø¡ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙˆÙƒØ³Ø§Øª
        const allBoxes = document.querySelectorAll('.box');
        allBoxes.forEach(box => box.style.display = 'none');

        // Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ø¨ÙˆÙƒØ³ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨ ÙÙ‚Ø·
        const targetBox = document.getElementById(idToShow);
        if (targetBox) targetBox.style.display = 'block';

        // Ø¥Ø¹Ø§Ø¯Ø© Ù„ÙˆÙ† ÙƒÙ„ Ø§Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø§Øª Ø¥Ù„Ù‰ Ø§Ù„Ø£Ø³ÙˆØ¯
        const allIcons = document.querySelectorAll('.sidebar-icon i');
        allIcons.forEach(icon => icon.style.color = 'black');

        // ØªÙ„ÙˆÙŠÙ† Ø§Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø© Ø§Ù„Ù…Ø¶ØºÙˆØ· Ø¹Ù„ÙŠÙ‡Ø§
        if (iconElement && iconElement.querySelector('i')) {
            iconElement.querySelector('i').style.color = '#8e2de2'; // Ø§Ø®ØªØ± Ø§Ù„Ù„ÙˆÙ† Ø§Ù„Ø°ÙŠ ØªØ±ÙŠØ¯Ù‡
        }
    }
</script>

<script>
    window.onload = function () {
        const payments = {
            "PayPal": "Ø£Ø¯Ø®Ù„ Ø¨Ø±ÙŠØ¯Ùƒ ÙÙŠ PayPal",
            "Redotpay": "Ø£Ø¯Ø®Ù„ ID Redotpay",
            "Neteller": "Ø£Ø¯Ø®Ù„ Ø¨Ø±ÙŠØ¯Ùƒ ÙÙŠ Neteller",
            "Skrill": "Ø£Ø¯Ø®Ù„ Ø¨Ø±ÙŠØ¯ Skrill",
            "USDT (TRC20)": "Ø£Ø¯Ø®Ù„ Ø¹Ù†ÙˆØ§Ù† Ù…Ø­ÙØ¸Ø© USDT (TRC20)",
            "Bank Transfers": null // Ù‡Ø°Ø§ Ù„Ù‡ Ù…Ø¬Ù…ÙˆØ¹Ø© Ø­Ù‚ÙˆÙ„ Ø®Ø§ØµØ©
        };

        const select = document.getElementById("paymentSelect");
        const input = document.getElementById("accountInput");
        const bankFields = document.getElementById("bankFields");

        // ØªØ¹Ø¨Ø¦Ø© Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø¨Ø§Ù„Ø®ÙŠØ§Ø±Ø§Øª
        for (let method in payments) {
            const option = document.createElement("option");
            option.textContent = method;
            option.value = method;
            select.appendChild(option);
        }

        // Ø§Ù„ØªØ¹Ø§Ù…Ù„ Ù…Ø¹ ØªØºÙŠÙ‘Ø± Ø§Ù„Ø®ÙŠØ§Ø±
        select.addEventListener("change", function () {
            const selected = select.value;
            const placeholder = payments[selected];

            // Ø¥Ø®ÙØ§Ø¡ ÙƒÙ„ Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø£ÙˆÙ„Ø§Ù‹
            input.style.display = "none";
            bankFields.style.display = "none";

            if (placeholder === null) {
                bankFields.style.display = "block";
            } else {
                input.style.display = "block";
                input.placeholder = placeholder;
                input.value = "";
            }
        });
    }
</script>
<script>
  // Ø§Ù†ØªØ¸Ø± Ø¬Ø§Ù‡Ø²ÙŠØ© Ø­Ø§Ù„Ø© Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø©
  function waitForAuth() {
    return new Promise(resolve => {
      const off = firebase.auth().onAuthStateChanged(u => { off(); resolve(u); });
    });
  }

  // Ø§Ø±Ø¬Ø¹ ÙƒÙˆØ¯ Ø§Ù„Ø¥Ø­Ø§Ù„Ø© Ù…Ù† Ø§Ù„Ù‚Ø§Ø¹Ø¯Ø© (referrals/<uid>/referralCode)
  async function getReferralCodeEnsured() {
    const user = firebase.auth().currentUser || await waitForAuth();
    if (!user) return "";

    const snap = await firebase.database().ref("referrals/" + user.uid + "/referralCode").once("value");
    const code = snap.val() || "";
    return code;
  }

  // Ù†Ø§ÙØ°Ø© Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ©
  async function shareNow() {
    const code = await getReferralCodeEnsured();        // â† ÙŠØ¶Ù…Ù† ÙˆØ¬ÙˆØ¯ Ø§Ù„ÙƒÙˆØ¯
    const siteUrl = "https://sofianabdelaziz.github.io/Florida.io/";
    const shareUrl = siteUrl + (code || "");

    const shareText =
`ğŸš€ Ø§ÙƒØ³Ø¨ Ù…Ù† ÙˆÙ‚ØªÙƒ Ù…Ø¹ SwapIO  

ğŸ¯ Ø±Ù…Ø² Ø§Ù„Ø¥Ø­Ø§Ù„Ø©: ${code || "ØºÙŠØ± Ù…ØªÙˆÙØ±"}  
ğŸŒ Ø±Ø§Ø¨Ø· Ø§Ù„Ù…ÙˆÙ‚Ø¹: ${siteUrl}  

ğŸ“º Ø´Ø§Ù‡Ø¯ Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª Ø¨ÙƒÙ„ Ø³Ù‡ÙˆÙ„Ø©  
ğŸ’° Ø§Ø±Ø¨Ø­ Ø§Ù„Ù…Ø§Ù„ Ù…Ù† ÙˆÙ‚Øª ÙØ±Ø§ØºÙƒ  
ğŸ¤ Ø´Ø§Ø±Ùƒ Ø§Ù„Ø±Ø§Ø¨Ø· Ù…Ø¹ Ø£ØµØ¯Ù‚Ø§Ø¦Ùƒ ÙˆØ²Ø¯ Ø£Ø±Ø¨Ø§Ø­Ùƒ ÙŠÙˆÙ…ÙŠÙ‹Ø§  
   Ø§Ù†Ø¶Ù… Ø¥Ù„ÙŠÙ†Ø§ Ø§Ù„Ø¢Ù† ÙˆØ§Ø¨Ø¯Ø£ Ø±Ø­Ù„ØªÙƒ Ù†Ø­Ùˆ Ø¯Ø®Ù„ Ø§Ø¶Ø§ÙÙŠ Ø¨ÙƒÙ„ Ø³Ù‡ÙˆÙ„Ø©  âœ¨ğŸ”¥`;

    if (!navigator.share) {
      alert("Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ© ØºÙŠØ± Ù…Ø¯Ø¹ÙˆÙ…Ø© Ø¹Ù„Ù‰ Ù‡Ø°Ø§ Ø§Ù„Ù…ØªØµÙØ­.");
      return;
    }

    try {
      await navigator.share({
        title: "Ø§ÙƒØ³Ø¨ Ù…Ù† ÙˆÙ‚ØªÙƒ Ù…Ø¹ SwapIO Ads",
        text: shareText
        // url Ù…Ø­Ø°ÙˆÙ Ø¹Ù…Ø¯Ø§Ù‹ Ø­ØªÙ‰ Ù„Ø§ ÙŠØ¸Ù‡Ø± Ø§Ù„Ø±Ø§Ø¨Ø· Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ø¨Ø¹Ø¯ Ø§Ù„Ù†Øµ
      });
      console.log("ØªÙ…Øª Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ© Ø¨Ù†Ø¬Ø§Ø­");
    } catch (err) {
      console.error("Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ©:", err);
    }
  }
</script>



    <script>
        // Ù†Ø³Ø® Ø±Ø§Ø¨Ø· Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ© Ù„Ù„Ø­Ø§ÙØ¶Ø©
        function copyReferralText() {
            const text = document.getElementById("referralText").innerText;
            navigator.clipboard.writeText(text).then(() => {
                showToast("ØªÙ… Ø§Ù„Ù†Ø³Ø® Ø¥Ù„Ù‰ Ø§Ù„Ø­Ø§ÙØ¶Ø©");
            }).catch(err => {
                showToast("Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ù†Ø³Ø® ");
            });
        }
    </script>
    <script>
          //ÙƒÙˆØ¯ Ø¹Ø±Ø¶ Ø§Ù„Ø£Ø®Ø·Ø§Ø¡
window.onerror = function(message, source, lineno, colno, error) {
  alert("Ø®Ø·Ø£: " + message + "\nÙÙŠ: " + source + ":" + lineno);
};
    </script>


<script>
  //Ø¯Ø§Ù„Ø© Ø§Ù„Ø³Ø­Ø¨ (Ù†ÙØ³ Ø§Ù„Ù…Ù†Ø·Ù‚ ÙˆØ§Ù„Ø´ÙƒÙ„ Ù…Ø¹ Ø­Ù…Ø§ÙŠØ§Øª Ø¨Ø³ÙŠØ·Ø©)
  function withdrawMoney(event) {
    event.preventDefault(); // Ù…Ù†Ø¹ Ø§Ù„ØªÙ†Ù‚Ù„

    // 1) ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø§ØªØµØ§Ù„:
    if (!navigator.onLine) {
      return showToast("âš  Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø¥Ù†ØªØ±Ù†ØªØŒ Ø¥ØªØµÙ„ Ø¨Ø§Ù„Ø´Ø¨ÙƒØ© ÙˆØ£Ø¹Ø¯ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø©.");
    }

    // Ø¯Ø§Ù„Ø© Ø§Ù„ØªÙ†ÙÙŠØ° Ø§Ù„ÙØ¹Ù„ÙŠØ© (proceed)
    var proceed = function () {
      const amount = (document.querySelector('input[type="number"]') || {value:""}).value.trim();
      const paymentMethod = (document.getElementById('paymentSelect') || {value:""}).value;
      const account = (document.getElementById('accountInput') || {value:""}).value.trim();

      // Ø§Ù„ØªØ­Ù‚Ù‚ Ø£ÙˆÙ„Ø§Ù‹ Ù…Ù† Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø¥Ø°Ø§ ÙƒØ§Ù†Øª ØªØ­ÙˆÙŠÙ„ Ø¨Ù†ÙƒÙŠ
      if (paymentMethod.trim().toLowerCase().includes("bank transfers")) {
        const bankNameHolderEl = document.getElementById("bankNameHolder");
        const bankIBANEl      = document.getElementById("bankIBAN");
        const bankNameEl      = document.getElementById("bankName");
        const bankSwiftEl     = document.getElementById("bankSwift");

        const bankNameHolder = bankNameHolderEl ? bankNameHolderEl.value.trim() : "";
        const bankIBAN       = bankIBANEl ? bankIBANEl.value.trim() : "";
        const bankName       = bankNameEl ? bankNameEl.value.trim() : "";
        const bankSwift      = bankSwiftEl ? bankSwiftEl.value.trim() : "";

        if (!bankNameHolder || !bankIBAN || !bankName || !bankSwift) {
          showToast("ÙŠØ±Ø¬Ù‰ Ù…Ù„Ø¡ Ø¬Ù…ÙŠØ¹ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ø¨Ù†ÙƒÙŠ.");
          return;
        }

        // Ø­ÙØ¸ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ø¨Ù†ÙƒÙŠ
        localStorage.setItem("bankNameHolder", bankNameHolder);
        localStorage.setItem("bankIBAN", bankIBAN);
        localStorage.setItem("bankName", bankName);
        localStorage.setItem("bankSwift", bankSwift);
      }
      // Ø¥Ø°Ø§ Ù„Ù… ÙŠÙƒÙ† ØªØ­ÙˆÙŠÙ„ Ø¨Ù†ÙƒÙŠØŒ ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø§Ù„Ø¹Ø§Ù…Ø© ÙÙ‚Ø·
      else if (!amount || !account || paymentMethod === "Ø§Ø®ØªØ± ÙˆØ³ÙŠÙ„Ø© Ø§Ù„Ø¯ÙØ¹") {
        showToast("ÙŠØ±Ø¬Ù‰ Ù…Ù„Ø¡ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ„ ÙˆØ§Ù„Ø¨ÙŠØ§Ù†Ø§Øª");
        return;
      }

      // ÙØ­Øµ Ø§Ù„Ø±ØµÙŠØ¯ Ø¨Ø´ÙƒÙ„ Ø¢Ù…Ù†
      var ub = (typeof userBalance !== "undefined") ? parseFloat(userBalance) : NaN;
      if (isNaN(ub)) {
        showToast("ØªØ¹Ø°Ù‘Ø± Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø±ØµÙŠØ¯ÙƒØŒ Ø§ØªØµÙ„ Ø¨Ø´Ø¨ÙƒØ© Ø¬ÙŠØ¯Ø© Ùˆ Ø­Ø§ÙˆÙ„ Ù„Ø§Ø­Ù‚Ù‹Ø§");
        return;
      }

      if (parseFloat(amount) > ub) {
        alert("Ø±ØµÙŠØ¯Ùƒ ØºÙŠØ± ÙƒØ§ÙÙŠ Ù„Ø¥ØªÙ…Ø§Ù… Ø§Ù„Ø³Ø­Ø¨. Ø±ØµÙŠØ¯Ùƒ Ù‡Ùˆ: " + ub + " USD");
          navigator.vibrate(200);
        return;
      }

      // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ø¯Ù†Ù‰ Ù„Ù„Ø³Ø­Ø¨
      if (parseFloat(amount) < 5) {
        alert("Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ø¯Ù†Ù‰ Ù„Ù„Ø³Ø­Ø¨ Ù‡Ùˆ 5 USD.");
        return;
      }

      // Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¹Ø§Ù…Ø©
      localStorage.setItem("withdrawAmount", amount);
      localStorage.setItem("withdrawAccount", account);
      localStorage.setItem("withdrawMethod", paymentMethod);

      // Ø­ÙØ¸ Ø§Ù„ØªØ§Ø±ÙŠØ® ÙˆØ§Ù„ÙˆÙ‚Øª
      const now = new Date().toLocaleString();
      localStorage.setItem("requestDate", now);

      // Ø­ÙØ¸ Ø±Ù‚Ù… Ø§Ù„Ø¹Ù…Ù„ÙŠØ©
      const transactionId = "SWP-" + Math.floor(Math.random() * 1000000000);
      localStorage.setItem("transactionId", transactionId);

      // Ø­ÙØ¸ uid Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… (Ù…Ø­Ø§ÙˆÙ„Ø© currentUser Ø£ÙˆÙ„Ø§Ù‹ Ø«Ù… onAuthStateChanged)
      var cu = (firebase.auth && firebase.auth().currentUser) ? firebase.auth().currentUser : null;
      if (cu) {
        localStorage.setItem("userUID", cu.uid);
      } else {
        firebase.auth().onAuthStateChanged(function(user) {
          if (user) {
            localStorage.setItem("userUID", user.uid);
          }
        });
      }

      // === Ø®ØµÙ… Ù…Ø¨Ù„Øº Ø§Ù„Ø³Ø­Ø¨ Ù…Ù† Ø±ØµÙŠØ¯ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙˆØªØ¹ÙŠÙŠÙ† withdraw=2 ===
      (async function updateBalanceAndMark() {
        try {
          // Ø­Ø§ÙˆÙ„ Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ù…Ø³Ø¬Ù„ Ø§Ù„Ø¢Ù†
          let user = firebase.auth().currentUser;
          if (!user) {
            user = await new Promise(resolve => {
              const off = firebase.auth().onAuthStateChanged(u => { off(); resolve(u); });
            });
          }
          if (!user) throw new Error("Ù„Ù… ÙŠØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„.");

          const uid = user.uid;
          const amountToDeduct = parseFloat(amount);

          // Ø¬Ù„Ø¨ Ø§Ù„Ø±ØµÙŠØ¯ Ø§Ù„Ø­Ø§Ù„ÙŠ
          const snap = await firebase.database().ref("users/" + uid + "/balance").once("value");
          const currentBalance = parseFloat(snap.val()) || 0;

          // ØªØ­Ù‚Ù‚ Ù…Ù† ÙƒÙØ§ÙŠØ© Ø§Ù„Ø±ØµÙŠØ¯ (Ø­Ù…Ø§ÙŠØ© Ø¥Ø¶Ø§ÙÙŠØ© Ø¹Ù„Ù‰ Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ø³ÙŠØ±ÙØ±/DB Ù…Ù‡Ù…Ø© Ø£ÙŠØ¶Ø§Ù‹)
          if (amountToDeduct > currentBalance) {
            alert("Ø±ØµÙŠØ¯Ùƒ ØºÙŠØ± ÙƒØ§ÙÙŠ. Ø±ØµÙŠØ¯Ùƒ: " + currentBalance + " USD");
              navigator.vibrate(200);
            return;
          }

          const newBalance = currentBalance - amountToDeduct;

          // Ø­Ø¯Ù‘Ø« Ø§Ù„Ø±ØµÙŠØ¯ ÙˆÙ‚ÙŠÙ…Ø© withdraw = 2 ÙˆØ§Ù†ØªØ¸Ø± Ø§Ù„Ø§Ù†ØªÙ‡Ø§Ø¡
          await firebase.database().ref("users/" + uid).update({
            balance: newBalance,
            withdraw: 2
          });

        } catch (err) {
          console.error("Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø±ØµÙŠØ¯:", err);
          alert("Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ø³Ø­Ø¨: " + (err.message || err));
          return;
        }
      })();

      // Ø¥Ù† ÙƒØ§Ù†Øª Ù‡Ù†Ø§Ùƒ Ø¯Ø§Ù„Ø© fetchUserBalance Ù…Ø¹Ø±ÙØ©: Ø­Ø¯Ù‘Ø« Ø§Ù„ÙˆØ§Ø¬Ù‡Ø©
      if (typeof fetchUserBalance === "function") {
        try { fetchUserBalance(); } catch(e){ console.warn(e); }
      }

      // Ø¥Ø´Ø¹Ø§Ø± Ø§Ù„Ù†Ø¬Ø§Ø­ Ø«Ù… Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„
        navigator.vibrate(200);
      alert("âœ… ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø·Ù„Ø¨ Ø§Ù„Ø³Ø­Ø¨ Ø¨Ù†Ø¬Ø§Ø­!");
      window.location.href = "withdraw.html?refresh=" + new Date().getTime();
    }; // Ù†Ù‡Ø§ÙŠØ© proceed

    // **Ù‡Ù†Ø§: Ù†Ø±ÙŠØ¯ Ø¬Ù„Ø¨ Ø§Ù„Ø±ØµÙŠØ¯ Ù‚Ø¨Ù„ ØªÙ†ÙÙŠØ° proceed** (Ø¥Ù† ÙƒØ§Ù†Øª Ø§Ù„Ø¯Ø§Ù„Ø© Ù…ÙˆØ¬ÙˆØ¯Ø©)
    if (typeof fetchUserBalance === "function") {
      try {
        // Ø§Ø¬Ø¹Ù„ fetchUserBalance ÙŠÙ†Ø§Ø¯ÙŠ proceed Ø¨Ø¹Ø¯ Ø§Ù„Ø§Ù†ØªÙ‡Ø§Ø¡ (ÙƒÙ…Ø§ ÙƒØ§Ù† Ù…ÙØµÙ…Ù…Ø§Ù‹)
        fetchUserBalance(proceed);
      } catch (e) {
        console.warn(e);
        // Ù„Ùˆ ÙØ´Ù„ØŒ Ù†Ù†ÙÙ‘Ø° proceed Ù…Ø¨Ø§Ø´Ø±Ø©
        proceed();
      }
    } else {
      // Ù„Ùˆ Ø§Ù„Ø¯Ø§Ù„Ø© ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯Ø©ØŒ Ù†Ù†ÙÙ‘Ø° proceed Ø§Ù„Ø¢Ù†
      proceed();
    }

  } // Ù†Ù‡Ø§ÙŠØ© withdrawMoney
</script>
                        
                        
    <!--Ø¬Ù„Ø¨ Ø§Ù„Ø±ØµÙŠØ¯-->
<script>
  // compat version: Ø¬Ù„Ø¨ Ø±ØµÙŠØ¯ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙˆØªØ®Ø²ÙŠÙ†Ù‡ Ø«Ù… ØªÙ†ÙÙŠØ° callback
  window.userBalance = null;

  window.fetchUserBalance = function(callback) {
    // Ù†ØªØ£ÙƒØ¯ Ù…Ù† Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø©
    firebase.auth().onAuthStateChanged(function(user) {
      if (!user) {
        if (typeof callback === "function") callback();
        return;
      }
      firebase.database().ref('users/' + user.uid + '/balance').once('value')
        .then(function(snap) {
          window.userBalance = snap.exists() ? snap.val() : null;
        })
        .catch(function(e){ console.error(e); })
        .finally(function() {
          if (typeof callback === "function") callback();
        });
    });
  };
</script>
    <script>
    const statusElement = document.getElementById("lastWithdrawStatus");
    statusElement.style.display = "none"; // Ù…Ø®ÙÙŠ Ø¨Ø§Ù„Ø¨Ø¯Ø§ÙŠØ©

    firebase.auth().onAuthStateChanged((user) => {
        if (!user) return;

        const uid = user.uid;

        firebase.database().ref(`users/${uid}/withdraw`)
        .once("value")
        .then((snapshot) => {
            const status = snapshot.val();

            if (status === 1) {
                statusElement.innerHTML = 'Ø¢Ø®Ø± Ø¹Ù…Ù„ÙŠØ© Ø³Ø­Ø¨ <span style="color:green;"><a href="#">ØªÙ… Ø§Ù„Ø³Ø­Ø¨</a></span>';
                statusElement.style.display = "block"; 
            } else if (status === 2) {
                statusElement.innerHTML = 'Ø¢Ø®Ø± Ø¹Ù…Ù„ÙŠØ© Ø³Ø­Ø¨ <span style="color:orange;"><a href="#">Ù‚ÙŠØ¯ Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©</a></span>';
                statusElement.style.display = "block"; 
            } else {
                // Ø¥Ø°Ø§ ÙƒØ§Ù†Øª 0 Ø£Ùˆ null ÙŠØ¨Ù‚Ù‰ Ù…Ø®ÙÙŠ
                statusElement.style.display = "none";
            }
        })
        .catch(() => {
            // Ø®Ø·Ø£ Ø¨Ø¬Ù„Ø¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
            statusElement.style.display = "none";
        });
    });
    </script>
    <script>

        function startWithdrawAnimation() {
            const text = document.getElementById("withdrawText");
            const loader = document.getElementById("withdrawLoader");

            text.style.display = "none";
            loader.style.display = "inline-block";

            // Ù†ÙÙ‘Ø° Ø¹Ù…Ù„ÙŠØ© Ø§Ù„Ø³Ø­Ø¨ Ù‡Ù†Ø§
            withdrawMoney();
        }


    </script>

    <script>
        //Ø¬Ù„Ø¨ Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ø´Ø§Ù‡Ø¯Ø§Øª Ù…Ù† ÙØ§ÙŠØ±Ø¨Ø§Ø³
        firebase.auth().onAuthStateChanged(user => {
            if (!user) return;
            const uid = user.uid;

            // Ø¬Ù„Ø¨ Ø§Ù„Ù‚ÙŠÙ…Ø© Ù…Ù† Ø§Ù„Ù…Ø³Ø§Ø± Ø§Ù„Ù…Ù†Ø§Ø³Ø¨ ÙÙŠ ÙØ§ÙŠØ±Ø¨Ø§Ø³
            firebase.database()
            .ref(`users/${uid}/Adswatch`) // ØºÙŠÙ‘Ø± Ø§Ù„Ù…Ø³Ø§Ø± Ø­Ø³Ø¨ Ù…ÙƒØ§Ù† Ø§Ù„ØªØ®Ø²ÙŠÙ† Ø¹Ù†Ø¯Ùƒ
            .once('value')
            .then(snap => {
                const value = snap.val();
                document.getElementById('Adswatch').textContent = value ?? '00';
            })
            .catch(err => {
                console.error("Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ø¹Ø¯Ø¯ Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª:", err);
                document.getElementById('Adswatch').textContent = '00';
            });
        });
    </script>

    <script>
    firebase.auth().onAuthStateChanged(user => {
        if (!user) return;
        const uid = user.uid;

        firebase.database()
        .ref(`users/${uid}/balance`)
        .once('value')
        .then(snapshot => {
            const earnings = snapshot.val() ?? 0;
            
            // Ø¬Ù„Ø¨ ÙƒÙ„ Ø§Ù„Ø¹Ù†Ø§ØµØ± Ø§Ù„Ù„ÙŠ Ø¹Ù†Ø¯Ù‡Ø§ class="balance"
            document.querySelectorAll(".balance").forEach(el => {
                el.textContent = earnings.toFixed(2);
            });
        })
        .catch(err => {
            console.error("Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ø§Ù„Ø£Ø±Ø¨Ø§Ø­:", err);
            document.querySelectorAll(".balance").forEach(el => {
                el.textContent = "0.00";
            });
        });
    });
    </script>

<script>
    // Ø¬Ù„Ø¨ Ø§Ù„Ø±ØµÙŠØ¯ Ø§Ù„ÙŠÙˆÙ…ÙŠ Ù…Ù† ÙØ§ÙŠØ±Ø¨Ø§Ø³
    firebase.auth().onAuthStateChanged(user => {
        if (!user) return;
        const uid = user.uid;

        firebase.database()
        .ref(`users/${uid}/daybalance`) // ØºÙŠÙ‘Ø± Ø§Ù„Ù…Ø³Ø§Ø± Ø­Ø³Ø¨ Ù‚Ø§Ø¹Ø¯Ø© Ø¨ÙŠØ§Ù†Ø§ØªÙƒ
        .once('value')
        .then(snapshot => {
            const dayBalance = snapshot.val();
            document.getElementById("daybalance").textContent = (dayBalance ?? 0).toFixed(2);
        })
        .catch(err => {
            console.error("Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ø§Ù„Ø±ØµÙŠØ¯ Ø§Ù„ÙŠÙˆÙ…ÙŠ:", err);
            document.getElementById("daybalance").textContent = "0.00";
        });
    });
</script>

                        <script>
// ÙŠÙØªØ±Ø¶ Ø£Ù† Firebase ØªÙ… ØªÙ‡ÙŠØ¦ØªÙ‡Ø§ Ù…Ø³Ø¨Ù‚Ù‹Ø§ (initializeApp)

firebase.auth().onAuthStateChanged(function(user) {
  const el = document.getElementById('referralText');
  if (!el) {
    console.warn('Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø¹Ù†ØµØ± Ø¨Ø§Ù„Ù…Ø¹Ø±Ù‘Ù referralText');
    return;
  }

  if (!user) {
    // Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ØºÙŠØ± Ù…Ø³Ø¬Ù„ Ø¯Ø®ÙˆÙ„
    el.textContent = 'Ø§Ù„Ø±Ø¬Ø§Ø¡ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ù„Ø¹Ø±Ø¶ Ø±Ø§Ø¨Ø· Ø§Ù„Ø¥Ø­Ø§Ù„Ø©';
    return;
  }

  const uid = user.uid;
  firebase.database().ref('referrals/' + uid + '/referralCode')
    .once('value')
    .then(function(snap) {
      const code = snap.val();

      if (code) {
        const base = 'https://sofianabdelaziz.github.io/Florida.io/';
        const url = base + encodeURIComponent(code);

        // ********** Ø§Ù„ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨: Ø¹Ø±Ø¶ Ø§Ù„Ù†Øµ ÙƒÙ€ base ÙÙ‚Ø· (Ø¯ÙˆÙ† ÙƒÙˆØ¯ Ø§Ù„Ø¥Ø­Ø§Ù„Ø©) **********
        el.textContent = base;

        // Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„Ø¹Ù†ØµØ± Ø±Ø§Ø¨Ø· <a>ØŒ Ø¹ÙŠÙ‘Ù† href Ù„Ù„Ø±Ø§Ø¨Ø· Ø§Ù„ÙƒØ§Ù…Ù„ (Ù…Ø¹ Ø§Ù„ÙƒÙˆØ¯) Ø­ØªÙ‰ ÙŠØ¤Ø¯ÙŠ Ø§Ù„Ù†Ù‚Ø± Ø¥Ù„Ù‰ Ø§Ù„Ø±Ø§Ø¨Ø· Ø§Ù„ØµØ­ÙŠØ­
        if (el.tagName === 'A') {
          el.setAttribute('href', url);
        }

        // ********** Ø­ÙØ¸ ÙƒÙˆØ¯ Ø§Ù„Ø¥Ø­Ø§Ù„Ø© ÙÙŠ localStorage ÙƒÙ…Ø§ Ø·Ù„Ø¨Øª **********
        try {
          localStorage.setItem('referralCodeswap', code);
        } catch (e) {
          console.warn('ØªØ¹Ø°Ù‘Ø± Ø­ÙØ¸ ÙƒÙˆØ¯ Ø§Ù„Ø¥Ø­Ø§Ù„Ø© ÙÙŠ localStorage:', e);
        }

      } else {
        el.textContent = 'Ù„Ù… ÙŠØªÙ… Ø¥Ø¹Ø¯Ø§Ø¯ ÙƒÙˆØ¯ Ø§Ù„Ø¥Ø­Ø§Ù„Ø© Ø¨Ø¹Ø¯.';
      }
    })
    .catch(function(err) {
      console.error('ØªØ¹Ø°Ù‘Ø± Ø¬Ù„Ø¨ ÙƒÙˆØ¯ Ø§Ù„Ø¥Ø­Ø§Ù„Ø©:', err);
      el.textContent = 'Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø¬Ù„Ø¨ ÙƒÙˆØ¯ Ø§Ù„Ø¥Ø­Ø§Ù„Ø©';
    });
});
                        </script>


                        <!-- Ø¶Ø¹ Ù‡Ø°Ø§ Ù…Ø¨Ø§Ø´Ø±Ø© Ù‚Ø¨Ù„ </body> -->
<style>
  .toast {
    position: fixed;
    left: 50%;
    bottom: 30px;
    transform: translateX(-50%);
    min-width: 240px;
    max-width: 90vw;
    padding: 14px 16px;
    border-radius: 12px;
    background-color: rgba(255, 255, 255, 0.9);
    color: #000;
    text-align: center;
    font-size: 15px;
    line-height: 1.4;
    z-index: 999999;      /* ÙÙˆÙ‚ ÙƒÙ„ Ø´ÙŠØ¡ */
    opacity: 0;
    visibility: hidden;
    pointer-events: none; /* Ù…Ø§ ÙŠÙ…Ù†Ø¹ Ø§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ Ø§Ù„Ø¹Ù†Ø§ØµØ± ØªØ­ØªÙ‡Ø§ */
    transition: opacity .35s ease, bottom .35s ease, visibility .35s;
  }
  .toast.show {
    opacity: 1;
    visibility: visible;
    bottom: 50px; /* Ø­Ø±ÙƒØ© Ù„Ø·ÙŠÙØ© Ù„ÙÙˆÙ‚ Ø¹Ù†Ø¯ Ø§Ù„Ø¸Ù‡ÙˆØ± */
  }
</style>

<div id="toast" class="toast"></div>

<script>
  // Ø¯Ø§Ù„Ø© Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„ØªÙˆØ³Øª
  function showToast(message, duration = 2200) {
    let toast = document.getElementById('toast');
    if (!toast) {
      // ÙƒØ­Ù…Ø§ÙŠØ© Ø¥Ø¶Ø§ÙÙŠØ©: Ø£Ù†Ø´Ø¦Ù‡ ØªÙ„Ù‚Ø§Ø¦ÙŠÙ‹Ø§ Ù„Ùˆ Ù…Ø´ Ù…ÙˆØ¬ÙˆØ¯
      toast = document.createElement('div');
      toast.id = 'toast';
      toast.className = 'toast';
      document.body.appendChild(toast);
    }

    toast.textContent = message;

    // Ø£Ø¸Ù‡Ø±Ù‡
    toast.classList.add('show');

    // Ø£Ø¹Ø¯ Ø¶Ø¨Ø· Ø£ÙŠ Ù…Ø¤Ù‚Øª Ø³Ø§Ø¨Ù‚ Ø«Ù… Ø£Ø®ÙÙÙ‡ Ø¨Ø¹Ø¯ Ø§Ù„Ù…Ø¯Ø©
    clearTimeout(toast._hideTimer);
    toast._hideTimer = setTimeout(() => {
      toast.classList.remove('show');
    }, duration);
  }

  // Ù…Ø«Ø§Ù„ Ø§Ø®ØªØ¨Ø§Ø± (Ø§Ø­Ø°ÙÙ‡ Ù„Ùˆ ØªØ­Ø¨)
  // document.addEventListener('DOMContentLoaded', () => {
  //   showToast('âœ… ÙŠØ¹Ù…Ù„ Ø§Ù„Ø¢Ù†!');
  // });
</script>
                
</body>
</html>

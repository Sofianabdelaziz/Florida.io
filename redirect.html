<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ad Viewer</title>
  <style>
    body, html {
      margin: 0;
      padding: 0;
      height: 100%;
      width: 100%;
      overflow: hidden;
    }
    #adFrame {
      width: 100vw;
      height: 100vh;
      border: none;
    }
    #skipBtn {
      position: absolute;
      bottom: 20px;
      right: 20px;
      padding: 10px 20px;
      background-color: #8e2de2;
      color: white;
      border: none;
      border-radius: 10px;
      font-size: 14px;
      cursor: pointer;
      display: none;
      z-index: 1000;
    }
  </style>
</head>
<body>
    <style>
  #openNow {
    position: fixed;   /* ÙŠØ«Ø¨Øª Ø§Ù„Ø²Ø± Ø£Ø³ÙÙ„ Ø§Ù„Ø´Ø§Ø´Ø© */
    bottom: 20%;       /* Ù…Ø³Ø§ÙØ© Ù…Ù† Ø§Ù„Ø£Ø³ÙÙ„ 20% */
    left: 50%;         /* Ù…Ù†ØªØµÙ Ø§Ù„Ø´Ø§Ø´Ø© Ø£ÙÙ‚ÙŠÙ‹Ø§ */
    transform: translateX(-50%); /* Ù„Ø¶Ø¨Ø·Ù‡ ØªÙ…Ø§Ù…Ù‹Ø§ ÙÙŠ Ø§Ù„Ù…Ù†ØªØµÙ */
    padding: 12px 24px;
    font-size: 16px;
    border: none;
    border-radius: 8px;
    background: linear-gradient(135deg, purple, lightpink);
    color: white;
    cursor: pointer;
  }
</style>

<button id="openNow">ÙØªØ­ Ø§Ù„Ø¢Ù†</button>
<p id="statusMsg"></p>

  <div id="waitText" style="
  position:fixed;top:20%;left:50%;
  transform:translateX(-50%);
  font-size:20px;text-align:center;
  background:#000;color:#fff;
  padding:10px 15px;border-radius:10px;
  display:none;">
  </div>

    <script>
        //Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ 
if (localStorage.getItem("isLoggedIn") !== "true") {
    window.location.href = "index.html"; // ÙŠÙØªØ­ ØµÙØ­Ø© ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„
}
    </script>
  

<!-- Firebase SDK -->
<script src="https://www.gstatic.com/firebasejs/12.0.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/12.0.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/12.0.0/firebase-database-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/12.0.0/firebase-firestore-compat.js"></script>
<script>
    // Ø¥Ø¹Ø¯Ø§Ø¯ Firebase
    const firebaseConfig = {
        apiKey: "AIzaSyBhOhK3yCv4p-dhfXYx-w1aRB19a-VpRKY",
        authDomain: "swapio-30675.firebaseapp.com",
        projectId: "swapio-30675",
        storageBucket: "swapio-30675.appspot.com",
        messagingSenderId: "936588847751",
        appId: "1:936588847751:web:81aa27a8a12fc6d6a06622",
        measurementId: "G-L4RH076S6H",
        databaseURL: "https://swapio-30675-default-rtdb.firebaseio.com"
    };

    // ØªÙØ¹ÙŠÙ„ Firebase
    firebase.initializeApp(firebaseConfig);

    // Ø§Ù„ØªØ£ÙƒØ¯ Ù…Ù† Ø£Ù† Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù…Ø³Ø¬Ù„ Ø§Ù„Ø¯Ø®ÙˆÙ„
    firebase.auth().onAuthStateChanged(function(user) {
        if (user) {
            const userEmail = user.email;
            const firstLetter = userEmail.charAt(0).toUpperCase();
            console.log("Email:", userEmail);
            console.log("First letter:", firstLetter);
        } else {
            // ğŸš€ Ø¥Ø¹Ø§Ø¯Ø© ØªÙˆØ¬ÙŠÙ‡ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø¥Ù„Ù‰ index.html Ù„Ùˆ ØºÙŠØ± Ù…Ø³Ø¬Ù„ Ø¯Ø®ÙˆÙ„
            window.location.href = "index.html";
        }
    });
</script>
  
<script>
/* ======= CONFIG ======= */
const companies = {
  adstera:    ["https://www.profitableratecpm.com/vs22t45qz?key=bab4101a67d8c42924d02d1968500e1c"],
  popads:     ["https://www.profitableratecpm.com/vs22t45qz?key=bab4101a67d8c42924d02d1968500e1c"],
  hilltop:    ["https://www.profitableratecpm.com/vs22t45qz?key=bab4101a67d8c42924d02d1968500e1c"],
  propeller:  ["https://www.profitableratecpm.com/vs22t45qz?key=bab4101a67d8c42924d02d1968500e1c"],
  mediahub:   ["https://www.profitableratecpm.com/vs22t45qz?key=bab4101a67d8c42924d02d1968500e1c"],
  yllix:      ["https://www.profitableratecpm.com/vs22t45qz?key=bab4101a67d8c42924d02d1968500e1c"],
  bidvertiser:["https://www.profitableratecpm.com/vs22t45qz?key=bab4101a67d8c42924d02d1968500e1c"],
  clickadu:   ["https://www.profitableratecpm.com/vs22t45qz?key=bab4101a67d8c42924d02d1968500e1c"],
  adcash:     ["https://www.profitableratecpm.com/vs22t45qz?key=bab4101a67d8c42924d02d1968500e1c"],
  admaven:    ["https://www.profitableratecpm.com/vs22t45qz?key=bab4101a67d8c42924d02d1968500e1c"]
};

let lastFive = [];
let batchCount = 0;
let banEvery = randomInt(1,4);
const adHistory = [];
let countdownActive = false;
let countdownTimer = null;

/* ======= Ø£Ø¯ÙˆØ§Øª Ù…Ø³Ø§Ø¹Ø¯Ø© ======= */
function randomInt(min, max) {
  return Math.floor(Math.random()*(max-min+1))+min;
}
function randomMs(minSec, maxSec) {
  return randomInt(minSec, maxSec) * 1000;
}
function getRestPeriod() {
  return randomInt(5,18) * 60 * 1000; // 5-18 Ø¯Ù‚ÙŠÙ‚Ø©
}
function getBanPeriod() {
  const min = Math.floor(2.15*60), max = Math.floor(4.5*60);
  return randomInt(min, max) * 60 * 1000; // Ø¯Ù‚Ø§Ø¦Ù‚ Ù…Ø­Ø³ÙˆØ¨Ø©
}

/* ======= Ø§Ø®ØªÙŠØ§Ø± Ø´Ø±ÙƒØ© Ø¹Ø´ÙˆØ§Ø¦ÙŠØ© Ù…Ø¹ ØªØ¬Ù†Ø¨ Ø¢Ø®Ø± 5 ======= */
function getRandomCompany() {
  let keys = Object.keys(companies).filter(c => !lastFive.includes(c));
  if (keys.length === 0) {
    lastFive = [];
    keys = Object.keys(companies);
  }
  const pick = keys[randomInt(0, keys.length-1)];
  lastFive.push(pick);
  if (lastFive.length > 5) lastFive.shift();
  return pick;
}

/* ======= Ø³Ø¬Ù„ Ø¢Ø®Ø± Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª (Ù„ØªØ¬Ù†Ø¨ Ø§Ù„ØªÙƒØ±Ø§Ø± Ø®Ù„Ø§Ù„ 10 Ø¯Ù‚Ø§Ø¦Ù‚) ======= */
function canShowAd(company) {
  const now = Date.now();
  const recent = adHistory.filter(e => now - e.time < 10*60*1000);
  if (recent.some(e => e.company === company)) return false;
  return true;
}
function registerAd(company) {
  adHistory.push({company, time: Date.now()});
  if (adHistory.length > 100) adHistory.shift();
}

   //Ù‡Ù†Ø§
  // ğŸ“Œ Ø§Ù„Ù†ØµÙˆØµ Ø§Ù„ØªÙŠ ØªØ±ÙŠØ¯ Ø¹Ø±Ø¶Ù‡Ø§
const waitMessages = [
  "ğŸ’¡ Ù‡Ù„ ØªØ¹Ù„Ù…ØŸ ÙŠÙ…ÙƒÙ†Ùƒ Ù…Ø¶Ø§Ø¹ÙØ© Ø£Ø±Ø¨Ø§Ø­Ùƒ Ø¨Ù…Ø´Ø§Ù‡Ø¯Ø© Ø§Ù„Ù…Ø²ÙŠØ¯ Ù…Ù† Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª!",
  "â³ Ø§Ø³ØªØ±Ø§Ø­Ø© Ù‚ØµÙŠØ±Ø©... Ø§Ø³ØªØ¹Ø¯ Ù„Ù„Ø¥Ø¹Ù„Ø§Ù† Ø§Ù„ØªØ§Ù„ÙŠ.",
  "ğŸ”¥ Ø´Ø§Ø±Ùƒ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ù…Ø¹ Ø£ØµØ¯Ù‚Ø§Ø¦Ùƒ ÙˆØ²Ø¯ Ø£Ø±Ø¨Ø§Ø­Ùƒ!",
  "ğŸ“ˆ Ø£Ø±Ø¨Ø§Ø­Ùƒ ØªÙƒØ¨Ø± Ù…Ø¹ ÙƒÙ„ Ø¥Ø¹Ù„Ø§Ù† ØªØ´Ø§Ù‡Ø¯Ù‡.",
  "ğŸ¯ Ù„Ø§ ØªÙ†Ø³Ù ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ ÙŠÙˆÙ…ÙŠÙ‹Ø§ Ù„ØªØ­ØµÙ„ Ø¹Ù„Ù‰ Ù…ÙƒØ§ÙØ£Ø© Ø¥Ø¶Ø§ÙÙŠØ©.",
  "ğŸ’µ Ù…Ø´Ø§Ù‡Ø¯ØªÙƒ Ù„Ù‡Ø°Ù‡ Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª ØªØ²ÙŠØ¯ Ø±ØµÙŠØ¯Ùƒ ØªÙ„Ù‚Ø§Ø¦ÙŠÙ‹Ø§!"
];

const waitTextBox = document.getElementById("waitText");

// Ø¯Ø§Ù„Ø© Ù„Ø¹Ø±Ø¶ Ù†Øµ Ø¹Ø´ÙˆØ§Ø¦ÙŠ
function showWaitMessage(durationMs) {
  if (durationMs < 5000) return; // Ù„Ùˆ Ø£Ù‚Ù„ Ù…Ù† 5 Ø«ÙˆØ§Ù†ÙŠ Ù„Ø§ ØªØ¹Ø±Ø¶ Ø´ÙŠØ¡

  const msg = waitMessages[randomInt(0, waitMessages.length - 1)];
  waitTextBox.textContent = msg;
  waitTextBox.style.display = "block";

  // Ø¥Ø®ÙØ§Ø¤Ù‡ Ø¹Ù†Ø¯ Ø§Ù†ØªÙ‡Ø§Ø¡ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±
  setTimeout(() => {
    waitTextBox.style.display = "none";
  }, durationMs);
}



  

/* ======= Ø§Ù„Ø¯ÙØ¹Ø©: Ù†ÙØªØ­ Ù†Ø§ÙØ°Ø© ÙˆØ§Ø­Ø¯Ø© Ø«Ù… Ù†ØºÙŠÙ‘Ø± Ù…ÙˆÙ‚Ø¹Ù‡Ø§ Ø¹Ø¯Ø© Ù…Ø±Ø§Øª ======= */
async function runBatch() {
  const hour = new Date().getHours();
  const size = (hour >= 1 && hour < 6) ? 3 : randomInt(4,7);

  // Ù†ÙØªØ­ Ù†Ø§ÙØ°Ø© ÙØ§Ø±ØºØ© ÙÙŠ Ø¨Ø¯Ø§ÙŠØ© Ø§Ù„Ù†Ù‚Ø± (ÙŠØ¶Ù…Ù† Ø£Ù†Ù‡Ø§ Ø¶Ù…Ù† user gesture)
  const adWin = window.open('', 'xpay_ad_win');
  if (!adWin) {
    // Ø§Ø­ØªÙ…Ø§Ù„ÙŠØ© Ø§Ù„Ø­Ø¸Ø± â€” Ø£Ø¹Ù„Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙˆØ£Ø±Ø¬Ø¹ ÙØªØ±Ø© Ø§Ù†ØªØ¸Ø§Ø± Ù‚ØµÙŠØ±Ø©
    alert('ØªÙ… Ø­Ø¸Ø± Ø§Ù„Ù†ÙˆØ§ÙØ° Ø§Ù„Ù…Ù†Ø¨Ø«Ù‚Ø© Ù…Ù† Ù…ØªØµÙØ­Ùƒ. Ø§Ø³Ù…Ø­ Ù„Ù„Ù†ÙˆØ§ÙØ° Ø§Ù„Ù…Ù†Ø¨Ø«Ù‚Ø© Ø£Ùˆ Ø¬Ø±Ø¨ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.');
    return getRestPeriod();
  }

  let shown = 0;
  let attempts = 0;
  const maxAttempts = size * 6; // Ø­Ø¯ Ù…Ø­Ø§ÙˆÙ„Ø§Øª Ù„ØªØ¬Ù†Ù‘Ø¨ Ø­Ù„Ù‚Ø© Ù„Ø§Ù†Ù‡Ø§Ø¦ÙŠØ©

  while (shown < size && attempts < maxAttempts) {
    attempts++;
    let comp = getRandomCompany();
    if (!canShowAd(comp)) continue;
    const urlList = companies[comp];
    const url = urlList[randomInt(0, urlList.length-1)];

    try {
      // Ø¥Ø¹Ø§Ø¯Ø© ØªÙˆØ¬ÙŠÙ‡ Ø§Ù„Ù†Ø§ÙØ°Ø© Ø§Ù„Ù…ÙØªÙˆØ­Ø© Ø¨Ø¯Ù„ ÙØªØ­ Ù†ÙˆØ§ÙØ° Ø¬Ø¯ÙŠØ¯Ø©
      adWin.location.href = url;
      registerAd(comp);
      shown++;

      // --- Ø§Ù„ÙˆØ¸Ø§Ø¦Ù Ø§Ù„ØªÙŠ Ø¹Ù†Ø¯Ùƒ Ù„ØªØ¹ÙˆÙŠØ¶ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… â€” ÙŠØ¬Ø¨ Ø£Ù† ØªÙƒÙˆÙ† Ù…Ø¹Ø±Ù‘ÙØ© ÙÙŠ Ù…ÙƒØ§Ù† Ø¢Ø®Ø± ---
      if (typeof addReward === 'function') await addReward();
      if (typeof addWatchedAd === 'function') await addWatchedAd();
      if (typeof addDailyReward === 'function') await addDailyReward();

      // Ø§Ù†ØªØ¸Ø§Ø± Ø¹Ø´ÙˆØ§Ø¦ÙŠ Ø¨ÙŠÙ† Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª (Ø¨Ø§Ù„Ø«ÙˆØ§Ù†ÙŠ)
      const delay = randomMs(7,12);
showWaitMessage(delay); // Ù†Ø¹Ø±Ø¶ Ù†Øµ Ø¹Ø´ÙˆØ§Ø¦ÙŠ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±
await new Promise(r => setTimeout(r, delay));
    } catch (err) {
      // Ø®Ø·Ø£ ÙÙŠ Ø§Ù„ØªÙ†Ù‚Ù„ â€” ÙƒØªÙ…Ù‡ ÙˆØ§Ø³ØªÙ…Ø±
      console.warn('Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ ÙØªØ­ Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†:', err);
      await new Promise(r => setTimeout(r, 1000));
    }
  }

  // Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù†Ø§ÙØ°Ø© Ø£Ùˆ ØªØ±ÙƒÙ‡Ø§ Ù…ÙØªÙˆØ­Ø© â€” Ø§Ø®ØªØ± Ù…Ø§ ØªÙØ¶Ù‘Ù„Ù‡:
  try { adWin.close(); } catch(e) {}

  batchCount++;

  let waitTime;
  if (hour>=1 && hour<6) {
    waitTime = 50*60*1000;
  } else if (batchCount >= banEvery) {
    waitTime = getBanPeriod();
    batchCount = 0;
    banEvery = randomInt(1,4);
  } else {
    waitTime = getRestPeriod();
  }

  return waitTime;
}

/* ======= Ø¹Ø¯Ù‘Ø§Ø¯ Ø§Ù„Ø­Ø¸Ø± Ù…Ø¹ Ø­ÙØ¸ ÙÙŠ localStorage ======= */
const openBtn = document.getElementById('openNow');
const statusMsg = document.getElementById('statusMsg');

function formatTime(sec) {
  const h = Math.floor(sec / 3600);
  const m = Math.floor((sec % 3600) / 60);
  const s = sec % 60;
  if (h > 0) return `${h} Ø³Ø§Ø¹Ø© ${m} Ø¯Ù‚ÙŠÙ‚Ø©`;
  if (m > 0) return `${m} Ø¯Ù‚ÙŠÙ‚Ø© ${s} Ø«Ø§Ù†ÙŠØ©`;
  return `${s} Ø«Ø§Ù†ÙŠØ©`;
}

function startCountdown(ms) {
  if (countdownTimer) clearInterval(countdownTimer);
  const endTime = Date.now() + ms;
  localStorage.setItem("banEnd", String(endTime));
  countdownActive = true;

  // Ø³ØªØ§ÙŠÙ„ Ø±Ø³Ø§Ù„Ø© ÙÙŠ Ù…Ù†ØªØµÙ Ø§Ù„Ø´Ø§Ø´Ø© (ÙŠÙ…ÙƒÙ† ØªØ¹Ø¯ÙŠÙ„ CSS Ø®Ø§Ø±Ø¬ÙŠÙ‹Ø§)
  statusMsg.style.position = "fixed";
  statusMsg.style.top = "50%";
  statusMsg.style.left = "50%";
  statusMsg.style.transform = "translate(-50%, -50%)";
  statusMsg.style.fontSize = "20px";
  statusMsg.style.textAlign = "center";

  let remaining = Math.max(0, Math.floor(ms/1000));
  statusMsg.textContent = `Ø³ÙŠØªÙ… ÙØªØ­ Ø¥Ø¹Ù„Ø§Ù† Ø¨Ø¹Ø¯ ${formatTime(remaining)}`;

  countdownTimer = setInterval(() => {
    remaining = Math.floor((endTime - Date.now())/1000);
    if (remaining <= 0) {
      clearInterval(countdownTimer);
      countdownTimer = null;
      countdownActive = false;
      localStorage.removeItem("banEnd");
      statusMsg.textContent = "";
      openBtn.disabled = false;
    } else {
      statusMsg.textContent = `Ø³ÙŠØªÙ… ÙØªØ­ Ø¥Ø¹Ù„Ø§Ù† Ø¨Ø¹Ø¯ ${formatTime(remaining)}`;
    }
  }, 1000);
}

/* ======= Ø±Ø¨Ø· Ø§Ù„Ø²Ø± ======= */
openBtn.addEventListener('click', async () => {
  openBtn.disabled = true;
  try {
    // ØªØ´ØºÙŠÙ„ Ø§Ù„Ø¯ÙØ¹Ø© (ÙØªØ­ Ù†Ø§ÙØ°Ø© ÙˆØ§Ø­Ø¯Ø© Ø¯Ø§Ø®Ù„ runBatch)
    const waitTime = await runBatch();
    // Ø¨Ø¯Ø¡ Ø§Ù„Ø¹Ø¯Ù‘Ø§Ø¯ Ù„Ù„Ø­Ø¸Ø±
    startCountdown(waitTime);
  } catch (err) {
    console.error('Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ ØªØ´ØºÙŠÙ„ Ø§Ù„Ø¯ÙØ¹Ø©:', err);
    openBtn.disabled = false;
  }
});

/* ØªØ¹Ø·ÙŠÙ„ Ø§Ù„Ø²Ø± Ø¹Ù†Ø¯ Ù…ØºØ§Ø¯Ø±Ø© Ø§Ù„ØµÙØ­Ø© */
window.addEventListener('blur', () => {
  openBtn.disabled = true;
});
window.addEventListener('focus', () => {
  if (!countdownActive) {
    openBtn.disabled = false;
    statusMsg.textContent = "";
  }
});

/* ======= Ø§Ø³ØªØ¹Ø§Ø¯Ø© Ø­Ø§Ù„ Ø§Ù„Ø¹Ø¯Ù‘Ø§Ø¯ Ø¹Ù†Ø¯ Ø§Ù„ØªØ­Ù…ÙŠÙ„ ======= */
window.addEventListener("load", () => {
  const banEndRaw = localStorage.getItem("banEnd");
  if (banEndRaw) {
    const banEnd = parseInt(banEndRaw, 10);
    const remaining = banEnd - Date.now();
    if (remaining > 0) {
      openBtn.disabled = true;
      startCountdown(remaining);
    } else {
      localStorage.removeItem("banEnd");
    }
  }
});
  </script>

<script>
        //ØªØ®Ø²ÙŠÙ† Ø±ØµÙŠØ¯.Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
async function addReward() {
  const user = firebase.auth().currentUser;
  if (!user) {
    console.error("Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù…Ø³ØªØ®Ø¯Ù… Ù…Ø³Ø¬Ù„ Ø¯Ø®ÙˆÙ„!");
    return;
  }

  const uid = user.uid;
  const userRef = firebase.database().ref("users/" + uid + "/balance");

  try {
    const snapshot = await userRef.get();
    let balance = snapshot.exists() ? snapshot.val() : 0;

    balance = parseFloat(balance) + 0.1; // Ù†Ø²ÙŠØ¯ 0.1

    await userRef.set(balance); // Ù†Ø­ÙØ¸Ù‡ Ù…Ù† Ø¬Ø¯ÙŠØ¯
    console.log("ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø±ØµÙŠØ¯:", balance);
  } catch (error) {
    console.error("Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø±ØµÙŠØ¯:", error);
  }
}
</script>

<script>
  // Ø²ÙŠØ§Ø¯Ø© Ø¹Ø¯Ø¯ Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª Ø§Ù„ØªÙŠ Ø´Ø§Ù‡Ø¯Ù‡Ø§ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
  async function addWatchedAd() {
    const user = firebase.auth().currentUser;
    if (!user) {
      console.error("Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù…Ø³ØªØ®Ø¯Ù… Ù…Ø³Ø¬Ù„ Ø¯Ø®ÙˆÙ„!");
      return;
    }

    const uid = user.uid;
    const userRef = firebase.database().ref("users/" + uid + "/daywacted");

    try {
      const snapshot = await userRef.get();
      let count = snapshot.exists() ? snapshot.val() : 0;

      count = parseInt(count) + 1; // Ù†Ø²ÙŠØ¯ 1

      await userRef.set(count); // Ù†Ø­ÙØ¸Ù‡ Ù…Ù† Ø¬Ø¯ÙŠØ¯
      console.log("ØªÙ… ØªØ­Ø¯ÙŠØ« Ø¹Ø¯Ø¯ Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª:", count);
    } catch (error) {
      console.error("Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ ØªØ­Ø¯ÙŠØ« Ø¹Ø¯Ø¯ Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª:", error);
    }
  }
</script>

<script>
  // Ø²ÙŠØ§Ø¯Ø© Ø£Ø±Ø¨Ø§Ø­ Ø§Ù„ÙŠÙˆÙ… Ù…Ù† LocalStorage
  function addDailyReward() {
    const now = Date.now();

    // Ù†Ø¬Ù„Ø¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù† localStorage
    let earningsData = JSON.parse(localStorage.getItem("earningsTodayData"));

    if (!earningsData) {
      // Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª â†’ Ù†Ø¨Ø¯Ø£ Ù…Ù† Ø¬Ø¯ÙŠØ¯
      earningsData = { amount: 0, startTime: now };
    } else {
      // ØªØ­Ù‚Ù‚ Ù‡Ù„ Ù…Ø±Ù‘ 24 Ø³Ø§Ø¹Ø©
      const elapsed = now - earningsData.startTime;
      if (elapsed > 24 * 60 * 60 * 1000) { 
        // Ù…Ø± Ø£ÙƒØ«Ø± Ù…Ù† ÙŠÙˆÙ… â†’ Ø¥Ø¹Ø§Ø¯Ø© ØªØµÙÙŠØ±
        earningsData = { amount: 0, startTime: now };
      }
    }

    // Ù†Ø²ÙŠØ¯ 0.1
    earningsData.amount = parseFloat(earningsData.amount) + 0.1;

    // Ù†Ø®Ø²Ù† Ù…Ù† Ø¬Ø¯ÙŠØ¯
    localStorage.setItem("earningsTodayData", JSON.stringify(earningsData));

    console.log("Ø£Ø±Ø¨Ø§Ø­ Ø§Ù„ÙŠÙˆÙ… Ø§Ù„Ø¢Ù†:", earningsData.amount.toFixed(2));
    return earningsData.amount;
  }
</script>


<script>
// ğŸ§  Ø¹Ø´ÙˆØ§Ø¦ÙŠØ© Ù„Ù„Ø¨ØµÙ…Ø© ÙˆØ§Ù„ØªØ´ÙˆÙŠØ´ Ø§Ù„Ø·Ø¨ÙŠØ¹ÙŠ

// âœ… Zoom Ø¹Ø´ÙˆØ§Ø¦ÙŠ Ø¨ÙŠÙ† 95% Ùˆ104%
document.body.style.zoom = (0.95 + Math.random() * 0.09).toFixed(2);

// âœ… Ø­Ø¬Ù… Ø§Ù„Ø®Ø· ÙŠØªØºÙŠØ± Ø¨Ø´ÙƒÙ„ Ø·ÙÙŠÙ
document.body.style.fontSize = `${Math.floor(14 + Math.random() * 3)}px`;

// âœ… Ù„ØºØ© Ø§Ù„Ù…ØªØµÙØ­ ØªØªØºÙŠØ± Ø¨Ø´ÙƒÙ„ Ø®ÙÙŠÙ
const langs = ['en-US', 'en-GB', 'fr-FR', 'ar-DZ'];
try {
  Object.defineProperty(navigator, 'language', {
    get: () => langs[Math.floor(Math.random() * langs.length)]
  });
} catch (e) {
  console.warn("Ù„Ù… ÙŠØªÙ… ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù„ØºØ©: " + e.message);
}

// âœ… Canvas fingerprint ØªØ´ÙˆÙŠØ´ Ø¨Ø³ÙŠØ·
try {
  const canvas = document.createElement('canvas');
  const ctx = canvas.getContext('2d');
  ctx.textBaseline = "top";
  ctx.font = "14px Arial";
  ctx.fillStyle = "#f00";
  ctx.fillText("Test" + Math.random().toFixed(5), 10, 10);
} catch (e) {
  console.warn("Canvas spoofing failed: " + e.message);
}

// âœ… Ø£Ø¨Ø¹Ø§Ø¯ Ø§Ù„Ø´Ø§Ø´Ø© (Screen Size) ØªØ´ÙˆÙŠØ´ Ø¨Ø³ÙŠØ·
try {
  const randomOffset = () => Math.floor(Math.random() * 3) - 1; // -1 Ø£Ùˆ 0 Ø£Ùˆ +1
  Object.defineProperty(screen, 'width', {
    get: () => window.innerWidth + randomOffset()
  });
  Object.defineProperty(screen, 'height', {
    get: () => window.innerHeight + randomOffset()
  });
} catch (e) {
  console.warn("Ù„Ù… ÙŠØªÙ… ØªØ¹Ø¯ÙŠÙ„ Ø£Ø¨Ø¹Ø§Ø¯ Ø§Ù„Ø´Ø§Ø´Ø©: " + e.message);
}

// âœ… WebGL Fingerprint noise
try {
  const getParameter = WebGLRenderingContext.prototype.getParameter;
  WebGLRenderingContext.prototype.getParameter = function(parameter) {
    if (parameter === 37445 || parameter === 37446) {
      // vendor / renderer
      return "FakeWebGL-" + Math.random().toString(36).substring(2, 8);
    }
    return getParameter.apply(this, arguments);
  };
} catch (e) {
  console.warn("WebGL spoofing failed: " + e.message);
}

// âœ… AudioContext Fingerprint noise
try {
  const origGetChannelData = AudioBuffer.prototype.getChannelData;
  AudioBuffer.prototype.getChannelData = function() {
    const results = origGetChannelData.apply(this, arguments);
    for (let i = 0; i < results.length; i += 100) {
      results[i] = results[i] + (Math.random() * 0.0001 - 0.00005);
    }
    return results;
  };
} catch (e) {
  console.warn("Audio spoofing failed: " + e.message);
}

// âœ… ØªØ£Ø®ÙŠØ± Ø¨Ø³ÙŠØ· ÙÙŠ Ø¨Ø¯Ø¡ Ø§Ù„ØªÙ†ÙÙŠØ° (300-800ms)
const fingerprintDelay = Math.floor(Math.random() * 500) + 300;
setTimeout(() => {
  console.log("âœ… Fingerprint noise applied.");
  // ÙŠÙ…ÙƒÙ†Ùƒ Ù‡Ù†Ø§ ØªØ´ØºÙŠÙ„ Ø£ÙŠ Ø´ÙŠØ¡ Ø¥Ø¶Ø§ÙÙŠ Ø¨Ø¹Ø¯ Ø§Ù„ØªØ£Ø®ÙŠØ±
}, fingerprintDelay);

</script>
</body>
</html>
